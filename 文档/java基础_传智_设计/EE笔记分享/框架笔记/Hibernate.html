<html>
<head>
  <title>Evernote Export</title>
  <basefont face="楷体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: 楷体;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="957"/>
<h1>01 初识hibernate</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#1C3387"><b>1、hibernate的概念</b></font><div><font color="#E30000">hibernate是ormapping技术，也就是对象关系映射技术实现的一种。</font></div><div><font color="#E30000">hibernate与jdbc技术不同的一点在于jdbc是面向sql语句的技术，而hibernate是面向对象的一门技术。</font><div><font color="#E30000"><br></font></div><div><font color="#E30000"><br></font></div><div><font color="#1C3387"><b>2、使用JDBC的优缺点</b></font></div><div><font color="#E30000">·使用JDBC的优点：</font></div><div><font color="#E30000">  JDBC有连接池，所以获取connection的速度会非常快，因为不需要每次重新创建connection。</font></div><div><font color="#E30000">·使用JDBC的缺点：</font></div><div><font color="#E30000">&lt;1&gt;使用JDBC的时候，由于每次都要自己书写sql语句，因此使用起来比较繁琐。</font></div><div><font color="#E30000">&lt;2&gt;执行完JDBC操作之后，每次都需要自己从结果集中获取信息封装进对象中，这样的操作非常麻烦。</font></div><div><font color="#E30000">&lt;3&gt;每次都需要在finally中关闭资源，由于每次关闭资源也可能发生异常，所以关闭下个资源的操作需要放入到关闭上个异常的fianlly操作中。</font></div><div><font color="#E30000">&lt;4&gt;由于每次进行crud的代码过多，做查询操作的时候更是麻烦，所以会造成代码冗余量太大。</font></div><div><font color="#E30000">&lt;5&gt;JDBC并没有做到数据的缓存，所以每次去取数据的时候，即使是以前取过的数据也需要重复读取，这样会浪费带宽，并且降低数据库的并发量。</font></div><div><font color="#E30000">注:在做查询操作的sql语句中，尽量不要使用in、between…and…以及做判断(例如&gt;=3)等操作，因为这样的语句会对每种情况进行遍历，然后执行每种情况的sql语句，从而降低了效率。使用union以及or则不需要遍历，虽然也是执行了多条sql语句，但是效率要比前者高。</font></div><div><font color="#E30000"><br></font></div><div><font color="#E30000">·使用hibernate的优点</font></div><div><font color="#E30000">&lt;1&gt;由于hibernate是面向对象的操作，所以不需要自己书写sql语句。</font></div><div><font color="#E30000">&lt;2&gt;由于hibernate是自己内部关闭资源的，所以不需要自己手动去关闭。</font></div><div><font color="#E30000">&lt;3&gt;由于hibernate会执行sql语句并且自动封装成对象返回，所以这样的操作要比JDBC手动操作方便。</font></div><div><font color="#E30000">&lt;4&gt;hibernate中提供了一级缓存、二级缓存以及查询缓存等数据缓存技术，所以不用去取重复性的数据。</font></div><div><font color="#E30000">&lt;5&gt;由于hibernate针对多种数据库都适用，所以它的可移植性很高。</font></div><div><font color="#E30000">·使用hibernate的缺点</font></div><div><font color="#E30000">&lt;1&gt;由于sql语句都是由hibernate内部生成的，所以如果要对sql语句做优化，几乎是不可能的事情。</font></div><div><font color="#E30000">&lt;2&gt;如果一张表中的数据到达千万级别，hibernate生成的sql语句可能效率并不是很高，这个时候应该考虑用ibatis承担相关的工作，</font><span style="color: rgb(227, 0, 0);">所以hibernate只适合一些中小型的项目开发。</span></div><div><font color="#E30000"><br></font></div><div><font color="#E30000"><br></font></div><div><font color="#1C3387"><b>3、hibernate提升性能的方法</b></font></div><div><font color="#E30000">所谓性能问题，也就是说发出的sql语句越少，性能就越高，hibernate针对性能问题才具了以下几种技术：</font></div><div><font color="#E30000">&lt;1&gt;延迟加载</font></div><div><font color="#E30000">&lt;2&gt;数据缓存</font></div><div><font color="#E30000">&lt;3&gt;抓取策略</font></div><div><font color="#E30000"><br></font></div><div><font color="#E30000"><br></font></div><div><font color="#1C3387"><b>4、映射文件的作用</b></font></div><div><font color="#E30000">*.hbm.xml是一种映射文件，它的作用在于建立表到类的映射。</font></div><div><font color="#E30000">&lt;1&gt;实现表名和类名之间的映射。</font></div><div><font color="#E30000">&lt;2&gt;实现表中字段名称和类中属性的名称的映射。</font></div><div><font color="#E30000">&lt;3&gt;实现表里字段类型和属性类型的映射。</font></div><div><font color="#E30000"><br></font></div><div><font color="#E30000"><br></font></div><div><font color="#1C3387"><b>5、hibernate中的几个重要组成部分</b></font></div><div><font color="#E30000">&lt;1&gt;持久化类</font></div><div><font color="#E30000">&lt;2&gt;映射文件</font></div><div><font color="#E30000">&lt;3&gt;hibernate的配置文件，用于产生链接</font></div><div><font color="#E30000">&lt;4&gt;客户端</font></div><div><font color="#E30000"><br></font></div><div><font color="#E30000"><br></font></div><div><font color="#1C3387"><b>6、hibernate执行的大概流程</b></font></div><div><font color="#E30000">当运行到代码：</font><span style="color: rgb(227, 0, 0);">Session session = new Session()；session.save(person);的时候，hibernate就会去映射文件查找person对象对应的表，然后再去查找person对象属性对应的表的字段，然后拼接sql语句。然后再进行JDBC操作。</span></div><div><span style="color: rgb(227, 0, 0);"><br></span></div><div><span style="color: rgb(227, 0, 0);"><br></span></div><div><font color="#1C3387"><b>7、hibernate的源码存放路径</b></font></div><div><span style="color: rgb(227, 0, 0);">hibernate-distribution-3.5.6-Final/project/core/src/main/java。</span></div><div><font color="#E30000"><br></font></div><div><font color="#E30000"><br></font></div><div><font color="#1C3387"><b>8、hibernate启动需要的一些jar包</b></font></div><div><font color="#E30000">注:不要忘记hibernate根目录下的hibernate3.jar核心包。</font></div><div><span style="color: rgb(227, 0, 0);"><img src="Hibernate_files/Image.png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></span></div><div><span style="color: rgb(227, 0, 0);"><br></span></div><div><span style="color: rgb(227, 0, 0);"><br></span></div><div><font color="#1C3387"><b>7、第一次使用hibernate</b></font></div><div><span style="color: rgb(227, 0, 0);">&lt;1&gt;编写person类</span></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Person</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>implements</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Serializable {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">pid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">pname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">psex</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long getPid() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">pid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setPid(Long pid) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">pid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= pid;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getPname() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">pname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setPname(String pname) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">pname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= pname;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getPsex() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">psex</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setPsex(String psex) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">psex</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= psex;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left"><font face="'Courier New'" size="2"><br></font></div><div><font color="#E30000"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">&lt;2&gt;建立表和类之间关系映射表</span></span></font></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">从hibernate提供的例子中copy一份User.hbm.xml，然后进行修改。</span></span></div><div><font color="#E30000">这里书写一个Person.hbm.xml</font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;?</span></font><font face="Courier New" size="2"><span style="font-size:10pt">xml</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">version</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;1.0&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">?&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;!</span></font><font face="Courier New" size="2"><span style="font-size:10pt">DOCTYPE</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">PUBLIC</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">package</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cn.itheima.hibernate.domain&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;!--</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">            class用于描述一个持久化类</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">            name属性+package就是类的全名</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">            table就是表名，如果不写，就和类名一致</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">            catalog是数据库的名称，一般情况下，可以不写</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">       --&gt;</span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;</span></font><span style="font-family: 'Courier New'; font-size: 13px;">Person</span><font face="Courier New" size="2"><span style="font-size:10pt">&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">table</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;person&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;!--</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">                  id代表标示符的属性</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">                  name为属性的名称，它与持久化中的get后的属性是对应的</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">                  column就是表中的列名，默认就是属性的名称</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">                  length就是数据库中类型的长度，如果不写，默认就是最大长度</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">             --&gt;</span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;pid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;pid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.Long&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">length</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;5&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;!--</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">                        generator是主键的产生机制</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">                   --&gt;</span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">generator</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;increment&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;!--</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">                  property表示的是一般属性</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">             --&gt;</span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;pname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;pname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;psex&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;</span></font><span style="font-family: 'Courier New'; font-size: 13px;">psex</span><font face="Courier New" size="2"><span style="font-size:10pt">&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#008080" face="'Courier New'" size="2"><br></font></div><div align="left"><div style="color: rgb(0, 128, 128); font-family: 'Courier New'; font-size: small;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">&lt;3&gt;建立hibernate.cfg.xml映射文件</span></span></div><div style="text-align: -webkit-auto;"><font color="#E30000">从hibernate的包中拷贝出来一个hibernate.cfg.xml文件，进行修改，参数可以从hibernate.properties中读取。</font></div><div style="text-align: -webkit-auto;"><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;!</span></font><font face="Courier New" size="2"><span style="font-size:10pt">DOCTYPE</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">hibernate-configuration</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">PUBLIC</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">       </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">       </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-configuration</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">session-factory</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;hibernate.dialect&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">org.hibernate.dialect.MySQLDialect</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">property</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;hibernate.connection.driver_class&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">com.mysql.jdbc.Driver</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">property</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;hibernate.connection.username&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">root</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">property</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;hibernate.connection.password&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">sorry</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">property</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;hibernate.connection.url&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">jdbc:mysql://localhost:3306/myhibernate</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;hbm2ddl.auto&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">update</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">property</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">resource</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cn/itheima/hibernate/domain/Person.hbm.xml&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">session-factory</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-configuration</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="color: rgb(227, 0, 0);"><font color="#008080" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(0, 128, 128); font-size: small;"><font face="'Courier New'"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">&lt;4&gt;在PersonDao中写入如下代码：</span></span></font></div><div align="left"><div align="left" style="font-size: small;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">Configuration conf =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">new</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Configuration();</span></font></font></span></div><div align="left" style="font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//configure方法默认读取的就是classpath目录下的hibernate.cfg.xml文件</span></font></div><div align="left" style="font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//所以必须放在classpath下面，并且文件名称必须是hibernate.cfg.xml</span></font></div><div align="left" style="font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">conf.configure();</span></font></div><div align="left" style="font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//如果配置文件名称不是hibernate.cfg.xml或者不是放在classpath下面，那么必须通过下面这种方式引入</span></font></div><div align="left" style="font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//conf.configure(&quot;路径&quot;);</span></font></div></div><span style="font-family: 'Courier New'; font-size: 13px;"><font color="#328712">//构建session工厂</font></span><div align="left"><div align="left" style="font-family: 'Courier New';"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#328712" size="2">//由于配置文件中设置hbm2ddl.auto为update，所以下面的这条代码也会创建表，但是不能创建数据库</font></font></span></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">SessionFactory sessionFactory = conf.buildSessionFactory();</span></font></font></span></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//创建一个session</span></font></span></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">Session session = sessionFactory.openSession();</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//利用session开启一个新的事务</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//保存一个新建的person对象到数据库</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">Person person =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">new</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Person();</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">person.setPname(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;wq&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">person.setPsex(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;male&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">session.save(person);</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//提交事务</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">transaction.commit();</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//关闭session</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">session.close();</span></font></div><div align="left" style="font-weight: normal; font-family: 'Courier New'; font-size: small; color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-weight: normal; color: rgb(227, 0, 0); font-family: 'Courier New'; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">&lt;5&gt;执行结果：</span></span></font></div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;"><img src="Hibernate_files/Image [1].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;"><br></div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;">&lt;6&gt;补充点：</div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;">* 一个sessionFactory只能连接一个数据库。</div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;">* 配置文件的信息、映射文件的信息都会存储到sessionFactory中。</div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;">* sessionFactory是一个重量级的类，它是单例的，并且是线程安全的。</div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;">* hibernate可以根据hibernate.cfg.xml连接数据库、动态创建表、引入映射文件。</div><div style="font-weight: normal; text-align: -webkit-auto;"><font color="#E30000">注:</font></div><div style="font-weight: normal; text-align: -webkit-auto;"><font color="#E30000">* 持久化类的属性必须有get、set属性，否则hibernate是无法在读取到配置文件之后，无法获取以及设置该属性的值。</font></div><div style="font-weight: normal; text-align: -webkit-auto;"><font color="#E30000">* 如果没有在链接配置文件中引入一个类，那么这个类将不会被认为是一个持久化类。从而在执行程序的时候会报出Unknown entity的错误。</font></div><div style="font-weight: normal; text-align: -webkit-auto;"><font color="#41007D"><br></font></div><div style="font-weight: normal; text-align: -webkit-auto;"><font color="#41007D"><br></font></div><div style="text-align: -webkit-auto;"><div><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>8、修改一个持久化类的数据</b></font></span></div><div style="color: rgb(227, 0, 0); font-weight: normal;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">&lt;1&gt;修改创建sessionFactory的方式：</span></span></div><div align="left"><div align="left" style="font-size: small;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="'Courier New'"><b><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>static</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">SessionFactory</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></b></font></span></div><div align="left" style="font-size: small;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-size: small;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>static</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">{</span></font></font></div><div align="left" style="font-size: small;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Configuration conf =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Configuration();</span></font></font></div><div align="left" style="font-size: small;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      conf.configure();</span></font></div><div align="left" style="font-size: small;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-size: small;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= conf.buildSessionFactory();</span></font></font></div><div align="left" style="font-size: small;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font size="2"><br></font></div></div></div><div style="font-weight: normal; text-align: -webkit-auto;"><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">&lt;2&gt;PersonDao.java</span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">updatePerson() {</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Transaction</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><u>transaction</u></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= session.beginTransaction();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//首先提取数据，然后进行修改，最后更新</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Person person = (Person)session.get(Person.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      person.setPname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;wq2&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      session.update(person);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div></div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;"><br></div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;">&lt;3&gt;执行结果：</div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;"><img src="Hibernate_files/Image [2].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div style="font-weight: normal; text-align: -webkit-auto;"><font color="#E30000">注:</font></div><div style="font-weight: normal; text-align: -webkit-auto;"><font color="#E30000">* session.get()方法的第二个参数是主键对应的属性，类型必须要匹配，本方法利用的就是默认的构造函数创建对象，所以持久化类中一定要有一个默认的构造函数。</font></div><div style="font-weight: normal; text-align: -webkit-auto;"><font color="#E30000">* 在hibernate内部，如果缓存中已经存在一个有相关id值的持久化类副本，那么就会执行update方法。否则，不执行。</font></div><div style="font-weight: normal; text-align: -webkit-auto;"><font color="#6A0081"><br></font></div><div style="font-weight: normal; text-align: -webkit-auto;"><font color="#6A0081"><br></font></div><div style="text-align: -webkit-auto;"><font color="#1C3387"><b>9、删除一个持久化对象</b></font></div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;">Method 1:</div><div style="font-weight: normal; color: rgb(227, 0, 0); text-align: -webkit-auto;">PersonDao.java</div><div style="text-align: -webkit-auto;"><div align="left"><div align="left" style="font-family: 'Courier New'; font-weight: bold; font-size: small;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">updatePerson() {</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-weight: bold; font-size: small;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-weight: bold; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 'Courier New'; font-weight: bold; font-size: small;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Person person = (Person)session.get(Person.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-weight: bold; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      session.delete(person);</span></font></div><div align="left" style="font-family: 'Courier New'; font-weight: bold; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 'Courier New'; font-weight: bold; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 'Courier New'; font-weight: bold; font-size: small;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div></div></div></div></div><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></b></span></div></div><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Method 2:</span></span></font></b></span></div></div><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="font-family: 楷体; font-size: medium;"><b><font color="#6A0081"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">updatePerson() {</span></font></span></font></b></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Person person =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Person();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      person.setPid(1L);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      session.delete(person);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#6A0081">}</font><br><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><font face="Courier New"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></b></span></font></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><img src="Hibernate_files/Image [3].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></span></span></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></b></span></div></div></div><div style="font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="font-family: 'Courier New';"><b><font color="#1C3387" size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;">10、查询持久化类的信息</span></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">PersonDao.java</span></span></font></b></span></div></div></div><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="font-family: 楷体; font-size: medium;"><b><font color="#6A0081"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">updatePerson() {</span></font></span></font></b></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      List&lt;Person&gt; personList = session.createQuery(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;from Person&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).list();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(Person person:personList){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            System.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.println(person.getPname());</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0);"><div><b style="color: rgb(127, 0, 85); font-family: 'Courier New'; font-size: 13px;"><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-weight: normal; text-align: -webkit-auto; border-spacing: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></b></div></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><img src="Hibernate_files/Image [4].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font size="2"><br></font></div><div align="left"><font color="#E30000">注:方言是为了告诉hibernate链接的是mysql数据库</font></div><div align="left"><div align="left"><font color="#E30000" size="2"><font face="Courier New" size="2"><span style="font-size: 10pt; background-color: rgb(232, 242, 254);">&lt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&quot;hibernate.dialect&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&gt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">org.hibernate.dialect.MySQLDialect</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">property</span></font><font face="Courier New" size="2"><span style="font-size: 10pt; background-color: rgb(232, 242, 254);">&gt;</span></font></font></div><div align="left" style="color: rgb(227, 0, 0);"><font size="2"><font color="#008080" face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe"><br></span></font></font></div><div align="left" style="color: rgb(227, 0, 0);"><font size="2"><font color="#008080" face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe"><br></span></font></font></div></div></div></div><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><b><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="font-family: 'Courier New';"><b><font color="#1C3387" size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;">11、Hibernate项目的逆向工程</span></font></b></span></font></font></b></span></span></font></b></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><b><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">在实际工程中，经常是先设计数据库表结构，然后自动生成持久化类以及Dao、Service层和映射文件。但是前提是必须把项目变成hibernate类型的项目。</span></span></font></b></span></font></font></b></span></span></font></b></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">将创建的工程转换为hibernate项目的方式：</span></span></font></b></span></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">点击MyEclipse——&gt;Project Capabilities——&gt;Add Hibernate Capabilities——&gt;这里不需要导入MyEclipse Libraries，所以不需要选择MyEclipse Libraries，如果使用的是Hibernate3版本的话，那么就选择Hibernate3.x就可以了——&gt;因为是已经存在的工程，所以选择Existing,并且导入配置文件的地址——&gt;设置好待生成的IBM自己实现的HibernateSessionFactory的存放的工程文件夹。</span></span></font></b></span></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></b></span></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">创建持久化类以及Dao、Service层和映射文件的步骤：</span></span></font></b></span></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Open Perspective——&gt;MyEclipse Database Explorer——&gt;右击mysql——&gt;Edit——&gt;输入用户名、密码以及URL地址，并且加载进数据库驱动——&gt;右击Person表——&gt;点击Hibernate Reverse Engineering——&gt;点击Browse——&gt;如果现在的工程不是Hibernate类型的工程，那么就不会看到本工程，如果是，则可以看到。——&gt;选择该工程——&gt;设置生成文件的文件夹——&gt;需要生成POJO(不需要生成抽象类，所以不需要点create abstract class)以及相应的DAO和映射文件——&gt;设置主键生成方式——&gt;生成成功。</span></span></font></b></span></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></b></span></font></font></b></span></div></div></div><div style="text-align: -webkit-auto; font-family: 楷体;"><font color="#E30000">注:在MyEclipse中提供了如何进行进行逆向工程的文档帮助。</font></div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto; font-family: 楷体;"><img src="Hibernate_files/Image [5].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto; font-family: 楷体;"><br></div><div style="text-align: -webkit-auto;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="font-family: 'Courier New';"><b><font color="#1C3387" size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><br></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="font-family: 'Courier New';"><b><font color="#1C3387" size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;">12、Hibernate的类型</span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Hibernate提供了一些类型，这些类型都与Java中的类型一一对应，映射文件中的&lt;property&gt;标签的type属性一般不用设置为hiberntea类型，除非想要按照自己特定的方式进行转换，例如Date类型的java数据如果只想转换到数据库只剩下时间，那么type中就可以填入time。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Java数据类型的Java属性，经过映射文件中的type转换为数据库中的类型并且存储相关的数据。但是type中如果设置的是java类型，那么就会比hibernate类型效率高，因为这样不用再进行中间的转换环节了。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="font-family: 'Courier New';"><b><font color="#1C3387" size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;">13、主键的几种生成机制</span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">* increment</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">  主键必须是数字类型，在主键的最大值的基础上加1，这一步是由hibernate完成的。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">* identity</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">  与increment基本一致，只是id加1的操作是由数据库完成的。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">  这时候就必须设置表的主键可以自动增加。否则，数据库无法更新主键，就会报错。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">  identity的效率比increment更高，因为不必再用程序操作主键加1了。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">* sequence </span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">  利用序列插入主键。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">* hilo</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">  利用高地位插入主键。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">* uuid</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">  利用uuid插入主键。这时候主键的类型必须是String类型的。生成主键的这个过程也是由hibernate内部自动完成的。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">* native</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">  根据不同的数据库自动生成标示符的支持能力，来选择是使用identity、sequence和hilo标示符生成器。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">* assigned</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">  这种方式指的是手动赋值，如果不手动赋值，就会报错。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div style="font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="font-family: 'Courier New';"><b><font color="#1C3387" size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;">14、设置</span></font></b></span></font></font></b></span></font></font></font></b></span></div></div></div><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="font-size: medium; font-family: 楷体;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font face="Courier New"><font><font><font face="Courier New"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt; background-color: rgb(232, 242, 254);">&lt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">name</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&quot;show_sql&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&gt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">true</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&lt;/</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">property</span></font><font face="Courier New" size="2"><span style="font-size: 10pt; background-color: rgb(232, 242, 254);">&gt;</span></font></font></font></font></font></font></font></span></div><div align="left"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div style="text-align: -webkit-auto;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><font color="#008080"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">就可以显示sql语句了。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></font></font></font></b></span></font></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">设置</span></span></font></b></span></font></font></b></span></font></font></font></b></span></font></font></font></b></span></div></div></div><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font face="Courier New"><font><font><font face="Courier New"><font><font><font face="Courier New"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt; background-color: rgb(232, 242, 254);">&lt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">name</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&quot;hbm2ddl.auto&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&gt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">update</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&lt;/</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">property</span></font><font face="Courier New" size="2"><span style="font-size: 10pt; background-color: rgb(232, 242, 254);">&gt;</span></font></font></font></font></font></font></font></font></font></font></span></div><div align="left"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div style="text-align: -webkit-auto;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div style="text-align: -webkit-auto;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><font><font face="Courier New"><font><font><font face="Courier New"><font><font color="#008080"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">的时候，如果设置的值为create-drop，那么启动时创建表，应用程序结束时，销毁表。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></font></font></font></b></span></font></font></font></font></font></font></font></font></font></font></b></span></font></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><font><font face="Courier New"><font><font><font face="Courier New"><font><font color="#008080"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">如果设置的值为update时，那么如果表不存在，则创建表，如果存在，则验证更新。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></font></font></font></b></span></font></font></font></font></font></font></font></font></font></font></b></span></div></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><div align="left" style="display: inline !important;"><div style="display: inline !important;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><font><font face="Courier New"><font><font><font face="Courier New"><font><font color="#008080"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font><font face="Courier New"><span style="color: rgb(127, 0, 85); font-family: 'Courier New';"><b><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">如果设置的值为validate，则验证表的结构，如果不一致，则直接报错，而不会更新表结构。</span></span></font></b></span></font></font></b></span></font></font></font></b></span></font></font></font></b></span></font></font></font></font></font></font></font></font></font></font></b></span></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div>
</div>
<hr>
<a name="2015"/>
<h1>02 持久化类的三种状态</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#1C3387"><b>1、hibernate中的三种状态</b></font><div><font color="#E30000">* 临时状态</font></div><div><font color="#E30000">* 持久化状态（托管状态）</font></div><div><font color="#E30000">* 脱管状态</font></div><div><font color="#E30000">注:hibernate内存是jvm内存的一部分。当持久化类的对象由jvm内存转入hibernate内存的时候，此对象就会进入持久态。此时，数据库中就已经有了相对应的值了。</font></div><div><font color="#E30000"><br></font></div><div><font color="#E30000"><br></font></div><div><font color="#1C3387"><b>2、存储持久化对象的状态分析</b></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt; background-color: rgb(212, 212, 212);">Person</span> <span style="font-size: 10pt;">person =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">Person</span><span style="font-size:10pt">();</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">person.setPname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;wq&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">person.setPsex(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;male&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//以上代码中，person都处于临时态</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">session.save(person);</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//此时person处于持久态</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">transaction.commit();</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//事务提交之后，sql语句就会发送给数据库进行处理，这时候数据库就有对应的值了</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">session.get(Person.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">, person.getPid());</span></font></span></font></div></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//此时，session并没有关闭，一级缓存并没有删除。所以不会发出sql查询语句。此时，依然处于持久化状态</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">session.close();</span></font></div><div align="left" style="font-family: 'Courier New'; font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">//session关闭之后，hibernate与数据库之间的链接就断开了，此时，持久化类的对象就处于脱管态了</span></font></div><div align="left"><div style="font-family: 'Courier New';"><font color="#E30000" size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;">注：如果是更新语句，那么hibernate首先会去查看持久化对象的pid值是否与数据库中的pid值对应，如果对应，则执行更新操作。否则，则报错。</span></font></div><div align="left" style="font-family: 'Courier New';"><span style="color: rgb(227, 0, 0); font-family: 楷体;"><span style="color: rgb(227, 0, 0); font-family: 楷体;"><br></span></span></div><div align="left" style="font-family: 'Courier New';"><span style="color: rgb(227, 0, 0); font-family: 楷体;"><span style="color: rgb(227, 0, 0); font-family: 楷体;"><br></span></span></div><b><font color="#1C3387">3、更新持久化对象的状态分析</font></b></div><div align="left"><div align="left" style="font-size: 13px;"><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#328712" face="Courier New">Transaction transaction = session.beginTransaction();</font></font></span></font></div><div align="left" style="font-family: 楷体; font-size: 13px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#328712"><font face="Courier New">Person person = (Person)session.get(Person.</font> <font face="Courier New">class</font><font face="Courier New">, 1L);</font></font></span></div><div align="left" style="font-family: 楷体; font-size: 13px;"><font color="#328712"><font face="Courier New">person.setPname(</font> <font face="Courier New">&quot;wq1&quot;</font><font face="Courier New">);</font></font></div><div align="left" style="font-family: 楷体; font-size: 13px;"><font color="#328712" face="Courier New">//执行evict方法之后，person由持久态变回了脱管态</font></div><div align="left" style="font-family: 楷体; font-size: 13px;"><font color="#328712" face="Courier New">session.evict(person);</font></div><div align="left" style="font-family: 楷体; font-size: 13px;"><font color="#328712" face="Courier New">//此时就入了脱管态，所以对象的内容已经修改了</font></div><div align="left" style="font-family: 楷体; font-size: 13px;"><font color="#328712" face="Courier New">//session.clear(); 把session中所有的对象清空</font></div><div align="left" style="font-family: 楷体; font-size: 13px;"><font color="#328712" face="Courier New">//执行下面的update方法之后，person又重新回到了持久态，并且更新成功了</font></div><div align="left" style="font-family: 楷体; font-size: 13px;"><font color="#328712" face="Courier New">session.update(person);</font></div><div align="left" style="font-family: 楷体; font-size: 13px;"><font color="#328712" face="Courier New">transaction.commit();</font></div><div align="left" style="font-family: 'Courier New';"><div><font color="#E30000" size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="text-align: -webkit-left;">注：在每次持久化类持久化之后，都会创建一个该对象的副本。执行set方法的时候，其实修改的是hibernate内存中的副本，最后update的时候再根据副本是否与原本一致，如果一致，那么将不会发送更新语句。否则，就会发送。</span></span></font></div><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); text-align: -webkit-left;"><br></span></span></div><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); text-align: -webkit-left;"><br></span></span></div></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><font color="#1C3387" face="Courier New"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b>4、两个session的状态分析</b></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">Transaction transaction = session.beginTransaction();</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">Person person = (Person)session.get(Person.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//上面的Person对于本session来说此时处于临时态</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">person.setPname(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;we&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">session.update(person);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//进入持久态</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: medium;"><font color="#1C3387" face="Courier New" size="2"><span style="font-size: 10pt;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b>5、将持久化类的对象从一级缓存清除的状态分析</b></span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">Transaction transaction = session.beginTransaction();</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">Person person =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Person();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">person.setPname(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;www&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">person.setPsex(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;male&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//由于通过save方法将person变为了持久态，所以会发出一条查询语句去查询person表的最大的主键值</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">session.save(person);</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2">//只要一执行save方法，hibernate就会与数据库进行交互，获取最大id+1给person。</font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//此时获取的person2实际上是从一级缓存的取出来的副本</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt; background:#c6dbae">Person person2 = (Person)session.get(Person.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#c6dbae"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#c6dbae">, person.getPid());</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">person2.setPname(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;aaa&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">session.evict(person2);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//通过evict方法将person以及person2从一级缓存踢出了，所以commit之后不会执行任何的操作</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">//其实sql语句在每次执行save方法的时候已经产生了，但是最后将缓存中的副本与原本进行对比时，没有了副本，所以不会执行sql语句。</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#328712">transaction.commit();</font><br><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div></div></div><font color="#1C3387"><b>6、将持久化类的对象从一级缓存清除并且最后又变回持久态的状态分析</b></font><div align="left"><div align="left"><div align="left"><div style="text-align: -webkit-auto;"><div align="left"><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">Person person =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Person();</span></font></font></span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">person.setPname(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;www&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">person.setPsex(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;male&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">session.save(person);</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">Person person2 = (Person)session.get(Person.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, person.getPid());</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">person2.setPname(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;aaa&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">session.evict(person2);</span></font></font></div><div align="left"><font><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">session.save(person2);</span></font></font></div><div align="left"><font><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">transaction.commit();</span></font></font></div><div align="left"><font color="#E30000">问题：为什么执行了两条insert语句？</font></div><div align="left"><font color="#E30000"><br></font></div><div align="left"><div><font><font color="#E30000" face="Courier New" size="2"><span style="font-size: 10pt;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="text-align: -webkit-left;">注：</span></span></span></font></font></div><div><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="text-align: -webkit-left;"><font color="#E30000">* 当执行transaction.commit的时候，session会检查session中所有的持久化态的对象，如果对方有id值，并且和数据库对应，那么就会和副本进行比较，如果相同，则什么也不做。否则，会发出update语句。如果没有id值，那么就会执行save操作。</font></span></span></div><div><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="text-align: -webkit-left;"><font color="#E30000">* session执行delete方法可以作用于持久态和脱管态，此时会清除数据库中相应的数据以及持久化和脱管态对象的主键值和持久化对象的副本。</font></span></span></div><div><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="text-align: -webkit-left;"><font color="#E30000">* 持久化类最好实现对象的序列化，有默认的构造函数，属性的类型最好别用基本类型。</font></span></span></div><div><font color="#E30000">* session关闭之后，与数据库之间的链接就彻底断了。</font></div><div><font color="#E30000">* 一个对象在get之后会生成一个原生态和持久态两个对象，如果使用evict方法，那么原生态的保留，持久态的删除，这时候就变为脱管态。</font></div></div></div></div></div></div></div></div>
</div>
<hr>
<a name="1936"/>
<h1>03 持久化对象之间的关系之一对多</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#1C3387"><b>1、一对多的单端关联</b></font><div><font color="#E30000">Classes.java</font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Classes</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>implements</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Serializable {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Set&lt;Student&gt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">students</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long getCid() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setCid(Long cid) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">cid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= cid;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getCname() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setCname(String cname) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">cname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= cname;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getDescription() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setDescription(String description) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= description;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Set&lt;Student&gt; getStudents() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">students</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setStudents(Set&lt;Student&gt; students) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">students</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= students;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0);"><div><font face="'Courier New'" size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Classes.hbm.xml</span></span></font></div></div><div align="left"><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;?</span></font><font face="Courier New" size="2"><span style="font-size:10pt">xml</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">version</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;1.0&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">?&gt;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;!</span></font><font face="Courier New" size="2"><span style="font-size:10pt">DOCTYPE</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">PUBLIC</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">package</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cn.itheima.hibernate.domain&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Classes&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">table</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;classes&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.Long&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">length</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;5&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">generator</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;increment&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;description&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;description&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font face="Courier New" size="2" style="color: rgb(106, 0, 129);"><span style="font-size:10pt">           <b> </b></span></font> <b><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;students&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></b></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#328712"><b><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></b></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#328712"><b><font face="Courier New" size="2"><span style="font-size:10pt">                        </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></b></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#328712"><b><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></b></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#328712"><b><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">one-to-many</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Student&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></b></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#328712"><b><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></b></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 'Courier New'; font-size: 10pt;"><font color="#008080"><br></font></div><div align="left"><div style="color: rgb(0, 128, 128); font-family: 'Courier New'; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Student.java</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student {</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long getSid() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setSid(Long sid) {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">sid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= sid;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getSname() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setSname(String sname) {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">sname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= sname;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getDescription() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setDescription(String description) {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= description;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="font-family: 'Courier New'; color: rgb(227, 0, 0);"><font size="2"><br></font></div><div align="left"><div style="font-family: 'Courier New'; font-size: small; color: rgb(227, 0, 0);"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Student.hbm.xml</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;?</span></font><font face="Courier New" size="2"><span style="font-size:10pt">xml</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">version</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;1.0&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">?&gt;</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;!</span></font><font face="Courier New" size="2"><span style="font-size:10pt">DOCTYPE</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">PUBLIC</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">package</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cn.itheima.hibernate.domain&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Student&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">table</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;student&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.Long&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">length</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;5&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">generator</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;increment&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;description&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;description&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><div><font color="#E30000" face="Courier New" size="2"><span style="font-size: 10pt;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;">注：在session中，绝对不允许出现两个持久化对象拥有相同的ID值，所以如果设置主键生成方式为assigned，并且设置其id为某个已经持久化对象的id的时候，就会报错。</span></span></font></div><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(65, 0, 125);"><br></span></span></div><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(65, 0, 125);"><br></span></span></div></div><div align="left"><div style="font-size: small; font-family: 'Courier New';"><font color="#1C3387"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b>2、为了实现能够子类决定配置文件的地址，可以采用如下代码实现。</b></span></font></div><div style="font-size: small; color: rgb(0, 128, 128); font-family: 'Courier New';"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">HibernateUtils.java </span></span></div><div style="text-align: -webkit-auto;"><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">HibernateUtils {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>static</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">SessionFactory</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>static</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>url</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">@Before</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">init(){</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            Configuration conf =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Configuration();</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            conf.configure(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>url</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= conf.buildSessionFactory();</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left"><font color="#E30000"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div><div align="left"><div style="font-family: 'Courier New'; font-size: small;"><font color="#E30000"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingleTest.java</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">OneToManySingleTest</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>extends</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">HibernateUtils {</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>static</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">{</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>url</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;hibernate.cfg.xml&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">@Test</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div></div></div></div></div></div></div><div><font color="#41007D"><br></font></div><div><font color="#1C3387"><b><br></b></font></div><div><div><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>3、在保存班级的时候，级联保存学生。</b></font></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">cascade为级联，用于在保存或者更新一个对象的时候保存或者更新级联对象</span></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Classes.hbm.xml</span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;students&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cascade</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;save-update&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">one-to-many</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Student&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#328712">&gt;</font><br><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><font color="#008080" face="Courier New"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingleTest.java</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Classes();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      classes.setCname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云2&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      classes.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云2班级&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//由于第一次创建，没有学生，所以需要创建一个set集合</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">HashSet&lt;Student&gt;();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setSname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;王强&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云2学生&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      students.add(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      classes.setStudents(students);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      session.save(classes);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font size="2"><br></font></div><div align="left"><div style="font-size: small;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select max(cid) from classes</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select max(sid) from student</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: insert into classes (cname, description, cid) values (?, ?, ?)</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: insert into student (sname, description, sid) values (?, ?, ?)</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">//因为Classes的映射文件中的set集合设置了cascade，所以最后需要设置classes对象的student对象的主键</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: update student set cid=? where sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><font color="#1C3387" face="Courier New"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b>4、在某个班级中增加学生</b></span></font></div><div style="font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setSname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;王强强&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云2班学生&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      classes.getStudents().add(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//因为classes对象现在已经是持久化对象，所以没有必要再save或者update了。</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//持久化对象的修改会触发数据库的修改。</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><font face="Courier New"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select max(sid) from student</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: insert into student (sname, description, sid) values (?, ?, ?)</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: update student set cid=? where sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><font color="#1C3387" face="Courier New"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b>5、修改某个班级的所有学生的姓名为rebelman</b></span></font></div><div style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(Student student : students){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            student.setSname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;rebelman&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><font face="Courier New"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: update student set sname=?, description=? where sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: update student set sname=?, description=? where sid=?</span></font></div><div align="left"><font size="2"><br></font></div><div align="left"><font size="2"><br></font></div></div></div></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><div><font color="#1C3387" face="Courier New" size="2"><span style="font-size:10pt"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b>6、一个没有添加cascade报出的错误</b></span></span></font></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Classes.hbm.xml</span></span></span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">set<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;students&quot;<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;cid&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">one-to-many<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">class</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;Student&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">set</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#008080" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div></div></div></div><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#6A0081">     </font> <font color="#328712">Session session =</font></span></font> <font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Classes();</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      classes.setCname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云2&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      classes.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云2班级&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//由于第一次创建，没有学生，所以需要创建一个set集合</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">HashSet&lt;Student&gt;();</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student();</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setSname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;王强&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云2学生&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      students.add(student);</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      classes.setStudents(students);</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      session.save(classes);</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 'Courier New'; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></div><div style="color: rgb(227, 0, 0); font-family: 'Courier New'; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><img src="Hibernate_files/Image [6].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></span></span></div><div style="color: rgb(227, 0, 0); font-family: 'Courier New'; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></div><div style="text-align: -webkit-auto;"><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">总结：</span></span></div><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">在映射文件中没有级联操作，但是在代码中建立关系，而且student又是一个临时状态的对象，hibernate不允许这种情况出现，所以才会报错。</span></span></div><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></div><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></div><div style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#1C3387"><b>7、inverse的用法</b></font></span></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">inverse表示对关系的维护，当inverse为true的时候表示不维护主键，inverse为false的时候表示维护主键，默认值为false。</span></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">因为该inverse属性在Classes.hbm.xml文件中，所以该inverse表示的是classes是否维护classes与student之间的关系。</span></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">Classes.hbm.xml</span></div><div style="font-family: 楷体; font-size: medium;"><div align="left"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;students&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cascade</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;save-update&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">inverse</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;true&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></span></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">one-to-many</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Student&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div></div><div align="left"><font color="#008080" face="'Courier New'" size="2"><br></font></div><div align="left"><div style="font-family: 'Courier New'; color: rgb(0, 128, 128); font-size: small;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setSname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;王强强&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云2班学生&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      classes.getStudents().add(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="font-family: 'Courier New'; color: rgb(227, 0, 0);"><font size="2"><br></font></div><div align="left"><div style="font-family: 'Courier New'; color: rgb(227, 0, 0); font-size: small;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select max(sid) from student</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: insert into student (sname, description, sid) values (?, ?, ?)</span></font></div><div align="left" style="font-family: 'Courier New';"><font color="#328712" size="2">//由于没有维护外键，所以最后缺少了一句update语句用于更新新增学生的外键。</font></div><div align="left" style="font-family: 'Courier New'; color: rgb(227, 0, 0);"><font size="2"><br></font></div><div align="left" style="font-family: 'Courier New'; color: rgb(227, 0, 0);"><font size="2"><img src="Hibernate_files/Image [7].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/><br><br></font></div><div align="left" style="font-family: 'Courier New'; color: rgb(227, 0, 0);"><font size="2"><br></font></div><div align="left"><div style="font-family: 'Courier New'; font-size: small;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font color="#1C3387">8、解除某个学生与其班级之间的关系</font></b></span></div><div style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#E30000">Classes.hbm.xml</font></span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">set<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;students&quot;<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">cascade</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;save-update&quot;<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">inverse</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;false&quot;</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;cid&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">one-to-many<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">class</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;Student&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">set</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font color="#008080" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Transaction</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><u>transaction</u></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= session.beginTransaction();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      classes.getStudents().remove(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select student0_.sid as sid2_0_, student0_.sname as sname2_0_, student0_.description as descript3_2_0_ from student student0_ where student0_.sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="font-family: 'Courier New';"><font color="#328712" size="2">//如果设置Classes.hbml.xml中的Set标签中的inverse为true，那么将不会有下面这条语句</font></div><div align="left" style="font-family: 'Courier New';"><div><font color="#328712" size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 'Courier New'; text-align: -webkit-left; font-size: small;">//更新被删除学生的外键值为null</span></span></font></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: update student set cid=null where cid=?</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><font color="#1C3387"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b>9、解除某个同学与其班级关系的同时，转入另外一个班级</b></span></font></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Method1：</span></span></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><div><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></span></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes1 = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes2 = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 2L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      classes1.getStudents().remove(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      classes2.getStudents().add(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select student0_.sid as sid2_0_, student0_.sname as sname2_0_, student0_.description as descript3_2_0_ from student student0_ where student0_.sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: update student set cid=null where cid=? and sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: update student set cid=? where sid=?</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 'Courier New'; color: rgb(227, 0, 0); font-size: small;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Method2：</span></span></div><div style="font-family: 'Courier New'; color: rgb(227, 0, 0); font-size: small;"><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></span></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes2 = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 2L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">     </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//直接让classes2添加student为学生</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      classes2.getStudents().add(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left"><div style="font-size: small; font-family: 'Courier New';"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#E30000">注：级联是对象与对象之间的操作，与关系无关，而inverse则是指对象与关系的操作。</font></span></div><div style="color: rgb(65, 0, 125); text-align: -webkit-auto;"><br></div><div style="color: rgb(65, 0, 125); text-align: -webkit-auto;"><br></div><div style="text-align: -webkit-auto;"><div><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>10、解除班级和所有学生之间的关系</b></font></span></div><div style="color: rgb(65, 0, 125);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Method1：</span></span></div><div style="color: rgb(65, 0, 125);"><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></span></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction</span> <span style="font-size:10pt; background:#d4d4d4">transaction</span> <span style="font-size:10pt">= session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">     </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//通过设置classes的子集为null，就可以取消本班级与所有学生之间的关系</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      classes.setStudents(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>null</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span> <span style="font-size:10pt; background:#d4d4d4">transaction</span> <span style="font-size:10pt">.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: update student set cid=null where cid=?</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 'Courier New'; font-size: small;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Method2：</span></span></div><div style="color: rgb(227, 0, 0); font-family: 'Courier New'; font-size: small;"><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></span></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      students.removeAll(students);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: update student set cid=null where cid=?</span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-size: small; font-family: 'Courier New';"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;">Method3出现的一个错误</div><div style="text-align: -webkit-auto;"><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">     </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(Student student : students){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">        students.remove(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><img src="Hibernate_files/Image [8].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></span></span></div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;">原因：由于对集合类既查询又更新，所以才出现这样的问题。</div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;"><br></div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;"><br></div><div style="text-align: -webkit-auto;"><b><font color="#1C3387">11、从某个班级中删除一部分学生</font></b></div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;">Method1：</div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;"><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></div></div><div style="text-align: -webkit-auto;"><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student1 = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student2 = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 2L);</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      students.remove(student1);</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      students.remove(student2);</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-size: 10pt;"><font face="Courier New"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select student0_.sid as sid2_0_, student0_.sname as sname2_0_, student0_.description as descript3_2_0_ from student student0_ where student0_.sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select student0_.sid as sid2_0_, student0_.sname as sname2_0_, student0_.description as descript3_2_0_ from student student0_ where student0_.sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: update student set cid=null where cid=? and sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: update student set cid=null where cid=? and sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#E30000" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="text-align: -webkit-auto;"><font size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#E30000">Method2：</font></span></font></div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;"><div><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></span></font></div></div></div></div></div><div style="text-align: -webkit-auto;"><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@</span><span style="font-size: 10pt; background-color: rgb(212, 212, 212);">Test</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">     </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(Student student : students){</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">       </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(student.getSid() == 2 || student.getSid() == 3){</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">              students.remove(student);</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">        }</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 'Courier New'; font-size: 10pt; color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></div><div style="font-family: 'Courier New'; font-size: 10pt; color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><img src="Hibernate_files/Image [9].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></span></span></div><div style="font-family: 'Courier New'; font-size: 10pt; color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></div><div style="font-family: 'Courier New'; font-size: 10pt; color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">改进版：</span></span></div><div style="font-family: 'Courier New'; font-size: 10pt; color: rgb(227, 0, 0);"><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></span></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#6A0081">   </font><font color="#328712">   Session session =</font></span></font> <font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">     </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//由于students已经持久化了，所以iterator也已经持久化了</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Iterator&lt;Student&gt; iterator = students.iterator();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">     </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>while</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(iterator.hasNext()){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">        Student student = (Student)iterator.next();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">       </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(student.getSid() == 2|| student.getSid() == 3){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">             </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//iterator因为已经持久化了，所以删除掉了之后，数据库中的数据也会随之更新</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">             </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><u>iterator</u></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.remove();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">        }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#6A0081">}</font><br><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt; color: rgb(227, 0, 0);"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#41007D" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#41007D" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#41007D" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: update student set cid=null where cid=? and sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#41007D" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: update student set cid=null where cid=? and sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium; color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium; color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>12、建立班级和一部分学生之间的关系</b></font></span></div><div style="text-align: -webkit-auto;"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">    </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student1 = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 4L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      students.add(student1);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student2 = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 5L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      students.add(student2);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select student0_.sid as sid2_0_, student0_.sname as sname2_0_, student0_.description as descript3_2_0_ from student student0_ where student0_.sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select student0_.sid as sid2_0_, student0_.sname as sname2_0_, student0_.description as descript3_2_0_ from student student0_ where student0_.sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: update student set cid=? where sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: update student set cid=? where sid=?</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-size: small; font-family: 'Courier New';"><font color="#1C3387"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b>13、删除某个学生</b></span></font></div><div style="text-align: -webkit-auto;"><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#646464" face="Courier New" size="2"><span style="font-size:10pt">@Test</span></font></span></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font color="#7F0055" face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">     </span> <span style="font-size: 10pt; background-color: rgb(212, 212, 212);">Session</span> <span style="font-size: 10pt;">session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 5L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      session.delete(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select student0_.sid as sid2_0_, student0_.sname as sname2_0_, student0_.description as descript3_2_0_ from student student0_ where student0_.sid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">//这里直接删除掉学生以及其和班级之间的关系</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: delete from student where sid=?</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>14、删除某个班级</b></font></span></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Method1：</span></span></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><div><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#646464" face="Courier New" size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></font></span></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      <u>Classes</u></span></font><font face="Courier New" size="2"><span style="font-size:10pt"> classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      session.delete(classes);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><div><font face="Courier New" size="2"><span style="font-size:10pt"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></span></font></div></div><div align="left"><div align="left" style="font-family: 楷体; font-size: 10pt;"><font><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></font></div><div align="left" style="font-family: 楷体; font-size: 10pt;"><font><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">//删除班级的时候，因为Classes要维护外键，所以先解除和学生们之间的关系，然后再删除班级</span></font></font></div><div align="left" style="font-family: 楷体; font-size: 10pt;"><font><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: update student set cid=null where cid=?</span></font></font></div><div align="left" style="font-family: 楷体; font-size: 10pt;"><font><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: delete from classes where cid=?</span></font></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div><div align="left"><div style="text-align: -webkit-auto;"><font color="#E30000">如果inverse设置为true，也就是Classes不维护主键，那么必须在Classes对象被删除之间解除Classes与学生之间的关系，这对于Classes是无能为力的。因为Classes获取students的时候也必须通过外键获得，没有了外键，Classes便无法修改students的外键。</font></div><div style="text-align: -webkit-auto;"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#E30000">Classes.hbm.xml</font></span></span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">set<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;students&quot;<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">cascade</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;save-update&quot;<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">inverse</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;true&quot;</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;cid&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">one-to-many<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">class</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;Student&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">set</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div></div></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><div><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#646464" face="Courier New" size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></font></span></font></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font><font face="Courier New" size="2"><span> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>void</b></span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">test</span><span> </span><span style="font-size: 10pt;">() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session = </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">     <span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><u>Classes</u></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><span> </span>classes = (Classes)session.get(Classes.</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>class</b></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.delete(classes);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><img src="Hibernate_files/Image [10].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></span></span></div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;"><br></div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;"><br></div><div style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><b><font color="#1C3387">15、删除班级的同时删除学生</font></b></span></div><div style="font-family: 楷体; font-size: medium;"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#E30000">Classes.hbm.xml</font></span></span></span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font face="Courier New" size="2" style="color: rgb(50, 135, 18);"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2" style="color: rgb(50, 135, 18);"><span> </span><span style="font-size: 10pt;">set<span> </span></span></font><font face="Courier New" size="2" style="color: rgb(50, 135, 18);"><span style="font-size: 10pt;">name</span></font><font color="#328712"> </font><font face="Courier New" size="2" style="color: rgb(50, 135, 18);"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#328712">&quot;students&quot;</font><font color="#A74500"> </font></span></font><font color="#A74500"><font face="Courier New" size="2"><span style="font-size: 10pt;">cascade</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">=</span></font></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#A74500">&quot;all&quot;</font><span style="color: rgb(50, 135, 18);"> </span></span></font><font face="Courier New" size="2" style="color: rgb(50, 135, 18);"><span style="font-size: 10pt;">inverse</span></font><font face="Courier New" size="2" style="color: rgb(50, 135, 18);"><span> </span><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2" style="color: rgb(50, 135, 18);"><span style="font-size: 10pt;">&quot;true&quot;</span></font><font color="#328712"> </font><font face="Courier New" size="2" style="color: rgb(50, 135, 18);"><span style="font-size: 10pt;">&gt;</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;cid&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">one-to-many<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">class</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;Student&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">set</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font color="#008080" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div align="left" style="font-family: 楷体; font-size: medium;"><div><font color="#008080" face="'Courier New'" size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#646464" face="Courier New" size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">OneToManySingTest.java</span></span></font></span></span></font></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font><font face="Courier New" size="2"><span> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>void</b></span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212);">test</span><span> </span><span style="font-size: 10pt;">() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session = </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">     <span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><u>Classes</u></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><span> </span>classes = (Classes)session.get(Classes.</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>class</b></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.delete(classes);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><div><font face="Courier New" size="2"><span style="font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></span></font></div><div align="left"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: delete from student where sid=?</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: delete from student where sid=?</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: delete from student where sid=?</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: delete from classes where cid=?</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div>
</div>
<hr>
<a name="786"/>
<h1>04 持久化对象之间的关系之多对一</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#1C3387"><b>1、在添加学生的时候添加班级</b></font><div><span style="color: rgb(227, 0, 0);">Student.java</span><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Classes</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">classes</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Classes getClasses() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">classes</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setClasses(Classes classes) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">classes</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= classes;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long getSid() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setSid(Long sid) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">sid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= sid;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getSname() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setSname(String sname) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">sname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= sname;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getDescription() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setDescription(String description) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= description;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-size: small;"><font face="'Courier New'"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Student.hbm.xml</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;?</span></font><font face="Courier New" size="2"><span style="font-size:10pt">xml</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">version</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;1.0&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">?&gt;</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;!</span></font><font face="Courier New" size="2"><span style="font-size:10pt">DOCTYPE</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">PUBLIC</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">package</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cn.itheima.hibernate.domain&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Student&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">table</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;student&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.Long&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">length</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;5&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">generator</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;increment&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;description&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;description&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">many-to-one</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;classes&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Classes&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cascade</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;save-update&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">many-to-one</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#008080" size="2"><br></font></div><div align="left"><div><font color="#008080" size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">ManyToOneTest.java</span></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Classes();</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><u>setCname</u></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;云二&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      classes.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云二班级&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student();</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setSname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;王强&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云二同学&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      student.setClasses(classes);</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      session.save(student);</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 'Courier New'; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select max(sid) from student</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select max(cid) from classes</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: insert into classes (cname, description, cid) values (?, ?, ?)</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: insert into student (sname, description, cid, sid) values (?, ?, ?, ?)</span></font></div><div align="left" style="font-family: 'Courier New';"><font size="2"><br></font></div><div align="left" style="font-family: 'Courier New';"><font size="2"><br></font></div><div align="left"><div><font color="#1C3387"><b><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">2、</span><span style="text-align: -webkit-auto;">在添加学生的时候添加班级</span></b></font></div><div style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">ManyToOneTest.java</span></span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Classes();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      classes.setCname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云二&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      classes.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云二班级&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setSname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;王强&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云二同学&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      student.setClasses(classes);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      session.save(classes);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><font face="'Courier New'" size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div></div><div align="left"><div align="left" style="font-family: 楷体; font-size: medium;"><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select max(cid) from classes</span></font></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: insert into classes (cname, description, cid) values (?, ?, ?)</span></font></font></div><div align="left" style="font-family: 'Courier New';"><font><font color="#328712" size="2">//由于session保存的是classes，所以去查看classes的映射文件，但是上面的程序中，classes并没有于任何student建立关系，所以，不会有插入学生的sql语句</font></font></div><div align="left"><div style="font-size: small; font-family: 'Courier New';"><font color="#E30000"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;">注：many-to-one中是不存在inverse属性的，因为多的一方每次都会自动维护外键。</span></font></div><div style="text-align: -webkit-auto;"><font><br></font></div><div style="text-align: -webkit-auto;"><font><br></font></div></div></div></div></div><div align="left"><div style="font-family: 'Courier New'; font-size: 10pt;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font color="#1C3387">3、已经存在一个班级，现在添加一个学生进入该班级</font></b></span></div><div style="font-family: 'Courier New'; font-size: 10pt;"><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">ManyToOneTest.java</span></span></span></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {f</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setSname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;王强&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云二学生&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      student.setClasses(classes);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      session.save(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select max(sid) from student</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: insert into student (sname, description, cid, sid) values (?, ?, ?, ?)</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#E30000" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="font-size: small; font-family: 'Courier New';"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#E30000">注：已经存在一个班级，现在新建一个学生，让这个学生加入到该班级，如果让班级维护关系，则会发出update语句。如果让学生维护关系，则不会发出update语句。一对多，多的一方维护关系效率比较高。所以经常将一那方的set集合中的inverse设置为true。</font></span></div><div style="font-size: small; font-family: 'Courier New';"><font><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#41007D"><br></font></span></font></div><div style="font-size: small; font-family: 'Courier New';"><font><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#41007D"><br></font></span></font></div><div style="font-family: 楷体; font-size: medium;"><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#1C3387"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b>4、解除所有的学生和该班级之间的关系</b></span></font></span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><div><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#646464" face="Courier New" size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">ManyToOneTest.java</span></span></font></span></font></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">     </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(Student student : students){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">        student.setClasses(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>null</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid2_0_, students0_.sname as sname2_0_, students0_.description as descript3_2_0_, students0_.cid as cid2_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: update student set sname=?, description=?, cid=? where sid=?</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>5、修改一个设置主键的Student的错误</b></font><br></span></font><div style="color: rgb(227, 0, 0);"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">ManyToOneTest.java</span></span></span></font></div></div><div style="font-family: 楷体; font-size: medium;"><div align="left"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">HashSet&lt;Student&gt;();</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student();</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      student.setSid(2L);</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setSname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;王强q&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云2同学&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      students.add(student);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      classes.setStudents(students);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.update(classes);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><div style="color: rgb(227, 0, 0); font-size: small;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font face="'Courier New'"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Student.hbm.xml</span></span></font></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;?</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">xml</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">version</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;1.0&quot;</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">?&gt;</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;!</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">DOCTYPE</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">hibernate-mapping</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">PUBLIC</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">hibernate-mapping</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">package</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;cn.itheima.hibernate.domain&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">class</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;Student&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">table</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;student&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">id</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;sid&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">column</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;sid&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">type</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;java.lang.Long&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">length</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;5&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">                  </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">generator</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">class</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;increment&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">id</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">property</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;sname&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">column</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;sname&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">type</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;java.lang.String&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">property</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;description&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">column</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;description&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">type</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;java.lang.String&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">/&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">many-to-one</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;classes&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">class</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;Classes&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">column</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;cid&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">cascade</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;save-update&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">many-to-one</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">class</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">hibernate-mapping</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font color="#008080" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div style="font-family: 楷体; font-size: 10pt;"><div align="left"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: update student set sname=?, description=?, cid=? where sid=?</span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div></div><div style="text-align: -webkit-auto;"><font color="#E30000"><img src="Hibernate_files/Image [11].png" type="image/png" height="90" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="783"/></font></div><div style="text-align: -webkit-auto;"><font color="#E30000"><br></font></div><div style="text-align: -webkit-auto;"><font color="#E30000">总结：因为Student中的主键生成机制是increment，如果自己赋值，那么当student持久化的时候，hibernate会去修改这个对象的信息，但是由于数据库中并不存在这个对象对应的记录，所以才会报错。</font></div><div style="text-align: -webkit-auto;"><div align="left"><font color="#E30000" face="'Courier New'" size="2"><br></font></div></div></div></div></div></div></div></div></div></div></div></div></div>
</div>
<hr>
<a name="2087"/>
<h1>05 持久化对象之间的关系之多对多</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><b><font color="#1C3387">1、多对多的中间表的主键有两种形式。一种是自定一个主键，然后定义两个外键，分别对应另外两个表的主键。另外一种就是定义两个既是主键又是外键的id，这种新式的主键就是复合主键。</font></b><div><font color="#E30000">注：</font></div><div><font color="#E30000">* 多对多谁维护关系，效率都是一样的，都要对第三张表进行操作</font></div><div><font color="#E30000">* 建立关系指的是在第三张表中插入一行数据</font></div><div><font color="#E30000">* 解除关系指的是在第三张表中删除一行数据</font></div><div><font color="#E30000">* 更新关系则是执行update语句，是一个先删除，后增加的过程，因为集合就是这样做的</font></div><div><font color="#E30000"><br></font></div><div><font color="#E30000"><br></font></div><div><font color="#1C3387"><b>2、增加学生的同时增加课程</b></font><br><font color="#6A0081">Student.java</font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Set&lt;Course&gt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">courses</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Set&lt;Course&gt; getCourses() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">courses</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setCourses(Set&lt;Course&gt; courses) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">courses</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= courses;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long getSid() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setSid(Long sid) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">sid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= sid;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getSname() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">sname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setSname(String sname) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">sname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= sname;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getDescription() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setDescription(String description) {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= description;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font face="'Courier New'" size="2"><br></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 'Courier New'; font-size: small;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Student.hbm.xml</span></span></div><div style="text-align: -webkit-auto;"><div align="left"><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;?</span></font><font face="Courier New" size="2"><span style="font-size:10pt">xml</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">version</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;1.0&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">?&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;!</span></font><font face="Courier New" size="2"><span style="font-size:10pt">DOCTYPE</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">PUBLIC</span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font face="'Courier New'" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">package</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cn.itheima.hibernate.domain&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Student&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">table</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;student&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.Long&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">length</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;5&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">generator</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;increment&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;description&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;description&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#328712" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;courses&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">table</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;student_course&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cascade</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;save-update&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">                        </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">many-to-many</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Course&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">many-to-many</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div></div></div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;"><br></div><div style="color: rgb(227, 0, 0); font-family: 'Courier New'; font-size: small;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Course.java</span></span></div></div><div align="left"><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Course {</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Set&lt;Student&gt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">students</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Long getCid() {</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-size: 10pt;"><font face="Courier New"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setCid(Long cid) {</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">cid</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= cid;</span></font></font></div><div align="left" style="font-size: 10pt;"><font face="Courier New"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getCname() {</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-size: 10pt;"><font face="Courier New"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setCname(String cname) {</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">cname</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= cname;</span></font></font></div><div align="left" style="font-size: 10pt;"><font face="Courier New"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getDescription() {</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-size: 10pt;"><font face="Courier New"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setDescription(String description) {</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">description</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= description;</span></font></font></div><div align="left" style="font-size: 10pt;"><font face="Courier New"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Set&lt;Student&gt; getStudents() {</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">students</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">;</span></font></font></div><div align="left" style="font-size: 10pt;"><font face="Courier New"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setStudents(Set&lt;Student&gt; students) {</span></font></font></div><div align="left" style="font-size: 10pt;"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span></font><font face="Courier New" size="2"><span style="font-size:10pt">students</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">= students;</span></font></font></div><div align="left" style="font-size: 10pt;"><font face="Courier New"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></font></div><div align="left" style="font-size: 10pt;"><font face="Courier New"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></font></div><div align="left" style="color: rgb(227, 0, 0); font-size: 10pt;"><font face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-size: 10pt;"><font face="Courier New"><font face="Courier New"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Course.hbm.xml</span></span></font></font></div><div align="left"><div align="left"><font face="Courier New"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" size="2"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;?</span></font><font face="Courier New" size="2"><span style="font-size:10pt">xml</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">version</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;1.0&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">?&gt;</span></font></font></span></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;!</span></font><font face="Courier New" size="2"><span style="font-size:10pt">DOCTYPE</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">PUBLIC</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font face="Courier New"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">package</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cn.itheima.hibernate.domain&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Course&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">table</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;course&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.Long&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">length</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;5&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">generator</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;increment&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">id</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cname&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;description&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;description&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.String&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font face="Courier New"><font face="Courier New" size="2" style="color: rgb(106, 0, 129);"><span style="font-size:10pt">            </span></font> <font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;students&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">table</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;student_course&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cascade</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;save-update&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></font></div><div align="left"><font color="#328712" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">                        </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">many-to-many</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Student&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;sid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">many-to-many</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#328712" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">class</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">hibernate-mapping</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font color="#008080" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font color="#008080" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font color="#008080" face="Courier New" size="2"><span style="font-size:10pt"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">hibernate.cfg.xml</span></span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">resource</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cn/itheima/hibernate/domain/Student.hbm.xml&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">mapping</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">resource</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cn/itheima/hibernate/domain/Course.hbm.xml&quot;</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">/&gt;</span></font></font></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">ManyToManyTest.java</span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.</span><span style="font-size:10pt; background:#d4d4d4">openSession</span><span style="font-size:10pt">();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.</span> <span style="font-size:10pt; background:#d4d4d4">beginTransaction</span><span style="font-size:10pt">();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Course course =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Course();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      course.setCname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;语文&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      course.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;中文&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Course&gt; courses =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">HashSet&lt;Course&gt;();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      courses.add(course);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Student();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setSname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;王强&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      student.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;云二学生&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      student.setCourses(courses);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.</span><span style="font-size:10pt; background:#d4d4d4">save</span> <span style="font-size:10pt">(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      transaction.</span> <span style="font-size:10pt; background:#d4d4d4">commit</span><span style="font-size:10pt">();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.</span><span style="font-size:10pt; background:#d4d4d4">close</span> <span style="font-size:10pt">();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt; background-color: rgb(212, 212, 212);">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select max(sid) from student</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select max(cid) from course</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: insert into student (sname, description, sid) values (?, ?, ?)</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: insert into course (cname, description, cid) values (?, ?, ?)</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: insert into student_course (sid, cid) values (?, ?)</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font color="#1C3387">3、已经有了一名学生，为该学生增加一门课程</font></b></span></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">ManyToManyTest.java</span></span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">test() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Course course =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Course();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      course.setCname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;数学&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      course.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;数字&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      student.getCourses().add(course);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select student0_.sid as sid0_0_, student0_.sname as sname0_0_, student0_.description as descript3_0_0_ from student student0_ where student0_.sid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select courses0_.sid as sid0_1_, courses0_.cid as cid1_, course1_.cid as cid2_0_, course1_.cname as cname2_0_, course1_.description as descript3_2_0_ from student_course courses0_ inner join course course1_ on courses0_.cid=course1_.cid where courses0_.sid=?</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select max(cid) from course</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: insert into course (cname, description, cid) values (?, ?, ?)</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: insert into student_course (sid, cid) values (?, ?)</span></font></div><div align="left"><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;"><font><br></font></div><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;"><font><br></font></div><div style="text-align: -webkit-auto;"><font color="#1C3387"><b>4、已经存在一个学生，新建一门课程，并且把该学生纳入到该课程之下</b></font></div><div style="text-align: -webkit-auto;"><div style="color: rgb(227, 0, 0);"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">ManyToManyTest.java</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">HashSet&lt;Student&gt;();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      students.add(student);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Course course =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Course();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      course.setCname(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;数学&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      course.setDescription(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;数字&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      course.setStudents(students);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.save(course);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font face="Courier New"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select student0_.sid as sid0_0_, student0_.sname as sname0_0_, student0_.description as descript3_0_0_ from student student0_ where student0_.sid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select max(cid) from course</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: insert into course (cname, description, cid) values (?, ?, ?)</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: insert into student_course (cid, sid) values (?, ?)</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><font color="#1C3387" size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b>5、把一个学生从一门课程移动到另外一门课程下面。</b></span></font></div><div style="color: rgb(227, 0, 0);"><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Method1:</span></span></font></div><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">ManyToManyTest.java</span></span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Course&gt; courses = student.getCourses();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Iterator&lt;Course&gt; iterator = courses.iterator();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">     </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>while</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(iterator.hasNext()){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">        Course course = iterator.next();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">       </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(course.getCid() == 1){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">              iterator.remove();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">        }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Course course = (Course)session.get(Course.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 2L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      student.getCourses().add(course);</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0);"><font face="'Courier New'" size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select student0_.sid as sid0_0_, student0_.sname as sname0_0_, student0_.description as descript3_0_0_ from student student0_ where student0_.sid=?</span></font></span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select courses0_.sid as sid0_1_, courses0_.cid as cid1_, course1_.cid as cid2_0_, course1_.cname as cname2_0_, course1_.description as descript3_2_0_ from student_course courses0_ inner join course course1_ on courses0_.cid=course1_.cid where courses0_.sid=?</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select course0_.cid as cid2_0_, course0_.cname as cname2_0_, course0_.description as descript3_2_0_ from course course0_ where course0_.cid=?</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: delete from student_course where sid=? and cid=?</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: insert into student_course (sid, cid) values (?, ?)</span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0);"><div><font face="Courier New" size="2"><span style="font-size:10pt"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">Method2:</span></span></span></font></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">ManyToManyTest.java</span></span></span></div></div></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><div align="left"><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#d4d4d4">test</span> <span style="font-size:10pt">() {</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Transaction transaction = session.beginTransaction();</span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">      Student student = (Student)session.get(Student.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Course&gt; courses = student.getCourses();</span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">      Course course1 = (Course)session.get(Course.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      courses.remove(course1);</span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><font face="Courier New" size="2"><span style="font-size:10pt">      Course course2 = (Course)session.get(Course.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 2L);</span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      courses.add(course2);</span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">          </span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      transaction.commit();</span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></font></div><div align="left"><font face="Courier New" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></font></div></div></div></div></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><div style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></span></font></div><div align="left"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select student0_.sid as sid0_0_, student0_.sname as sname0_0_, student0_.description as descript3_0_0_ from student student0_ where student0_.sid=?</span></font></span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select course0_.cid as cid2_0_, course0_.cname as cname2_0_, course0_.description as descript3_2_0_ from course course0_ where course0_.cid=?</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select courses0_.sid as sid0_1_, courses0_.cid as cid1_, course1_.cid as cid2_0_, course1_.cname as cname2_0_, course1_.description as descript3_2_0_ from student_course courses0_ inner join course course1_ on courses0_.cid=course1_.cid where courses0_.sid=?</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select course0_.cid as cid2_0_, course0_.cname as cname2_0_, course0_.description as descript3_2_0_ from course course0_ where course0_.cid=?</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: delete from student_course where sid=? and cid=?</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: insert into student_course (sid, cid) values (?, ?)</span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div></div></div></div></div></div></div></div></div>
</div>
<hr>
<a name="1166"/>
<h1>06 延迟加载</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#1C3387"><b>1、延迟加载就会该加载的时候再加载。延迟加载有类的延迟加载（也就是类的属性的延迟加载），集合的延迟加载（如果关联是集合的情况，例如一对多，多对多），单端关联的延迟加载（通过多的一方加载一的一方）。</b></font><div><font color="#E30000"><br></font></div><div><font color="#E30000"><br></font></div><div><font color="#1C3387"><b>2、类级别的延迟加载（通过session.load实现）</b></font></div><div><font color="#E30000">LazyTest.java</font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">savePerson() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.load(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//getId以及getClass是不会发出sql语句的</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      System.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.println(classes.getCid());</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//执行下列语句之后才会发出sql语句</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      System.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.println(classes.getCname());</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#E30000"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div><div align="left"><font color="#E30000"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div><div align="left"><div style="font-family: 'Courier New'; font-size: small;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b><font color="#1C3387">3、由于延迟加载报错的情况</font></b></span></div><div style="text-align: -webkit-auto;"><font color="#E30000">LazyTest.java</font></div><div style="text-align: -webkit-auto;"><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">savePerson() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session</span> <span style="font-size:10pt; background:#d4d4d4">session</span> <span style="font-size:10pt">=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)</span> <span style="font-size:10pt; background:#d4d4d4">session</span><span style="font-size:10pt">.load(Classes.</span></font><font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      System.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.println(classes.getCid());</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span><span style="font-size:10pt; background:#d4d4d4">session</span> <span style="font-size:10pt">.close();</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//由于session已经关闭，所以会报错</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      System.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.println(classes.getCname());</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><font face="Courier New" size="2"><span style="font-size:10pt"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></span></font></div></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><img src="Hibernate_files/Image [12].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></span></font></div></div></div><div><font color="#E30000"><br></font></div><div><font color="#E30000"><br></font><div><font color="#1C3387"><b>4、集合的延迟加载（集合的延迟加载是默认的）</b></font></div><div><span style="color: rgb(227, 0, 0);">LazyTest.java</span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">savePerson() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.</span> <span style="font-size:10pt; background:#d4d4d4">close</span><span style="font-size:10pt">();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><font face="Courier New" size="2"><span style="font-size:10pt"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></span></font></div><div align="left"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><font face="Courier New" size="2"><span style="font-size:10pt"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">LazyTest.java</span></span></span></font></div><div align="left"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">savePerson() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(Student student : students){</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            System.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.println(student.getSname());</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></div><div align="left"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid0_0_, students0_.sname as sname0_0_, students0_.description as descript3_0_0_, students0_.cid as cid0_0_ from student students0_ where students0_.cid=?</span></font></div></div></div><div><font color="#E30000"><br></font></div></div><div><font color="#E30000"><br></font></div><div><font color="#1C3387"><b>5、设置set集合的lazy属性为false的情况，在这种情况下就不是懒加载了，在获取集合的时候就会发出sql语句。</b></font></div><div><font color="#E30000">Classes.hbml.xml</font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;students&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">cascade</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;save-update&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">inverse</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;false&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">lazy</span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;false&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cid&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">column</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">key</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">one-to-many</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;Student&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt">set</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="color: rgb(227, 0, 0);"><font color="#008080" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 'Courier New'; font-size: 10pt;"><div style="color: rgb(0, 128, 128);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">LazyTest.java</span></span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font><font face="Courier New" size="2"><span> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>void</b></span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">savePerson() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">.openSession();</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Classes classes = (Classes)session.get(Classes.</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>class</b></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">, 1L);</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      session.</span><span> </span><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">close</span><span style="font-size: 10pt;">();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div></div><div align="left" style="color: rgb(0, 128, 128); font-family: 'Courier New'; font-size: 10pt;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="color: rgb(0, 128, 128); font-family: 'Courier New'; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid0_0_, students0_.sname as sname0_0_, students0_.description as descript3_0_0_, students0_.cid as cid0_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="font-family: 'Courier New'; font-size: small;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>6、设置set集合的lazy属性为extra的情况。</b></font></span></div><div style="font-family: 楷体; font-size: medium;"><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#E30000">Classes.hbml.xml</font></span></span></div><div align="left"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">set<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;students&quot;<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">cascade</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;save-update&quot;<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">inverse</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;false&quot;<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">lazy</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;extra&quot;</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></span></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;cid&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">one-to-many<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">class</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;Student&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">/&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">set</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font color="#008080" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">LazyTest.java</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">public</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">void</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">savePerson() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = (Classes)session.get(Classes.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">class</span></font><font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      System.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.println(students.size());</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select count(sid) from student where cid =?</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="text-align: -webkit-auto;"><font color="#1C3387"><b>7、设置lazy为true的情况</b></font></div><div style="text-align: -webkit-auto;"><div style="color: rgb(227, 0, 0);"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#E30000">Classes.hbml.xml</font></span></span></font></div><div align="left"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">set<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;students&quot;<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">cascade</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;save-update&quot;<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">inverse</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;false&quot;<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">lazy</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;true&quot;</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></span></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;cid&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">column</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">key</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">one-to-many<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">class</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;Student&quot;</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">/&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">set</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left" style="color: rgb(227, 0, 0);"><font color="#008080" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font color="#008080" face="Courier New" size="2"><span style="font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">LazyTest.java</span></span></span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font><font face="Courier New" size="2"><span> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>void</b></span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">savePerson() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Classes classes = (Classes)session.get(Classes.</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>class</b></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">, 1L);</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      System.</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>out</i></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">.println(students.size());</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div></div><div align="left" style="color: rgb(227, 0, 0);"><font color="#008080" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-size: 10pt;"><font face="Courier New"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_0_, classes0_.cname as cname1_0_, classes0_.description as descript3_1_0_ from classes classes0_ where classes0_.cid=?</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid0_0_, students0_.sname as sname0_0_, students0_.description as descript3_0_0_, students0_.cid as cid0_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left"><div><font color="#E30000" size="2"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;">注：当lazy设置为false或者true的时候，如果需要用count，sum，avg等函数计算数值的时候，这个时候并不需要把student中的数据加载出来，使用extra就可以不加载。</span></font></div><div style="color: rgb(227, 0, 0);"><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></div><div style="color: rgb(227, 0, 0);"><font size="2"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></div></div></div></div></div></div></div></div><b><font color="#1C3387">8、单端关联的延迟加载（通过多的一方加载一的一方）</font></b><div align="left"><div align="left"><div align="left"><div align="left"><div style="text-align: -webkit-auto;"><div align="left"><div align="left"><div><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font><font><font face="Courier New"><font color="#6A0081" size="2">&lt;many-to-one&gt;中的lazy有“false”、“proxy”、“no-proxy”，通过多的一方加载一的一方，就一条数据，所以保持默认值就可以，不会特别影响效率。</font></font></font></font></font></span></font></div><div style="color: rgb(227, 0, 0);"><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font><font><font face="Courier New"><font size="2"><br></font></font></font></font></font></span></font></div><div style="color: rgb(227, 0, 0);"><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font><font><font face="Courier New"><font size="2"><br></font></font></font></font></font></span></font></div></div></div></div></div></div></div></div></div></div></div>
</div>
<hr>
<a name="2045"/>
<h1>07 抓取策略</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><b><font color="#1C3387">1、抓取策略就是根据一个对象提取关联对象的策略</font></b><div><font color="#E30000">* 抓取策略多用于对集合的提取</font></div><div><font color="#E30000">&lt;set fetch=&quot;&quot;&gt;，fetch的值可以取“join”左外连接，“select”默认，“subselect”子查询</font></div><div><font color="#E30000">* 根据多的一端加载一的一端（这种情况对性能没有多大影响）。<br></font><div><font color="#E30000"><br></font></div><div><font color="#E30000"><br></font></div><div><font color="#1C3387"><b>2、查询所有班级和班级中所有的学生(N+1条语句)(fetch为“select”的情况)</b></font></div><div><font color="#E30000">FetchTest.java</font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@</span><span style="font-size: 10pt; background-color: rgb(212, 212, 212);">Test</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">savePerson() {</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#6A0081">      </font><font color="#328712">List&lt;Classes&gt; classesList = session.createQuery(</font></span></font> <font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">&quot;from Classes&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).list();</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(Classes classes : classesList){</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">            Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(Student student : students){</span></font></font></div><div align="left"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">                  System.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.println(student.getSname());</span></font></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">            }</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left"><font color="#E30000"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div><div align="left"><div><font color="#E30000"><font face="Courier New" size="2"><span style="font-size:10pt"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></span></font></font></div></div><div align="left"><div align="left"><div align="left"><font face="'Courier New'" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_, classes0_.cname as cname1_, classes0_.description as descript3_1_ from classes classes0_</span></font></font></div><div align="left"><font face="'Courier New'" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid0_0_, students0_.sname as sname0_0_, students0_.description as descript3_0_0_, students0_.cid as cid0_0_ from student students0_ where students0_.cid=?</span></font></font></div><div align="left"><font face="'Courier New'" size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid0_0_, students0_.sname as sname0_0_, students0_.description as descript3_0_0_, students0_.cid as cid0_0_ from student students0_ where students0_.cid=?</span></font></font></div><div align="left"><font color="#E30000" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div><div align="left"><font color="#E30000" face="'Courier New'" size="2"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div></div><div align="left"><div><span style="font-family: 'Courier New'; font-size: 10pt;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>3、把需求翻译成sql语句，如果里面含有子查询，用这种方式效率最高。</b></font></span></span></div><font color="#E30000">情况一：</font></div><div align="left"><font color="#E30000">FetchTest.java(fetch为“subselect”的情况)</font><div align="left"><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" size="2">@Test</font></font></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">savePerson() {</span></font></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      List&lt;Classes&gt; classesList = session.createQuery(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;from Classes&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).list();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2" style="color: rgb(106, 0, 129);"><span style="font-size:10pt">      </span></font> <font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>for</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(Classes classes : classesList){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">            Set&lt;Student&gt; students = classes.getStudents();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(Student student : students){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">                  System.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.println(student.getSname());</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">            }</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><div style="color: rgb(227, 0, 0);"><font><font face="Courier New" size="2"><span style="font-size:10pt"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></span></font></font></div><div align="left"><font><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_, classes0_.cname as cname1_, classes0_.description as descript3_1_ from classes classes0_</span></font></span></font></div><div align="left"><font><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid0_0_, students0_.sname as sname0_0_, students0_.description as descript3_0_0_, students0_.cid as cid0_0_ from student students0_ where students0_.cid in (select classes0_.cid from classes classes0_)</span></font></font></div><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></div><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">情况二：</span></span></div></div><div align="left"><div style="color: rgb(227, 0, 0); text-align: -webkit-auto;"><div><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); text-align: -webkit-left;">FetchTest.java(fetch为“subselect”的情况)</span></span></font></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font><font face="Courier New" size="2"><span> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>void</b></span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">savePerson() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#6A0081">     </font><font color="#328712"> List&lt;Classes&gt; classesList = session.createQuery(</font></span></font><font color="#328712"> <font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;from Classes where cid in (1,2)&quot;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">).list();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>for</b></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">(Classes classes : classesList){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">            Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>for</b></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">(Student student : students){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size: 10pt;">                  System.</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>out</i></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">.println(student.getSname());</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">            }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div></div><div align="left" style="font-family: 楷体; font-size: medium;"><div style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></span></font></div><div align="left"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_, classes0_.cname as cname1_, classes0_.description as descript3_1_ from classes classes0_ where classes0_.cid in (1 , 2)</span></font></span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid0_0_, students0_.sname as sname0_0_, students0_.description as descript3_0_0_, students0_.cid as cid0_0_ from student students0_ where students0_.cid in (select classes0_.cid from classes classes0_ where classes0_.cid in (1 , 2))</span></font></div><div style="color: rgb(227, 0, 0);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></div></div><div align="left"><div style="color: rgb(227, 0, 0); font-size: small; font-family: 'Courier New';"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); text-align: -webkit-left;">FetchTest.java(fetch为“select”的情况)</span></span></font></div><div style="font-family: 楷体; font-size: medium;"><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></span></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>public</b></span></font><font face="Courier New" size="2"><span> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>void</b></span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">savePerson() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      Session session =<span> </span></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      List&lt;Classes&gt; classesList = session.createQuery(</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;from Classes where cid in (1,2)&quot;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">).list();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>for</b></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">(Classes classes : classesList){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">            Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;"><b>for</b></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">(Student student : students){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size: 10pt;">                  System.</span></font><span> </span><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>out</i></span></font><font face="Courier New" size="2"><span> </span><span style="font-size: 10pt;">.println(student.getSname());</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">            }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font face="Courier New"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left"><div align="left"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font size="2"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_, classes0_.cname as cname1_, classes0_.description as descript3_1_ from classes classes0_ where classes0_.cid in (1 , 2)</span></font></font></span></div><div align="left"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid0_0_, students0_.sname as sname0_0_, students0_.description as descript3_0_0_, students0_.cid as cid0_0_ from student students0_ where students0_.cid=?</span></font></span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid0_0_, students0_.sname as sname0_0_, students0_.description as descript3_0_0_, students0_.cid as cid0_0_ from student students0_ where students0_.cid=?</span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div></div><div align="left"><div style="font-size: small;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>4、查询cid为1的班级的学生</b></font></span></div><div style="color: rgb(227, 0, 0); font-size: small; font-family: 'Courier New';"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); text-align: -webkit-left;">FetchTest.java(fetch为“select”的情况)</span></span></span></span></div><div align="left" style="text-align: -webkit-auto;"><div align="left"><div align="left"><div align="left" style="font-size: small;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></div><div align="left" style="font-size: small;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">savePerson() {</span></font></font></div><div align="left" style="font-size: small;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-size: small;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-size: small;"><font face="Courier New" size="2"><span style="font-size: 10pt;"><font color="#6A0081">     </font> <font color="#328712">Classes classes = (Classes)session.get(Classes.</font></span></font> <font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">, 1L);</span></font></font></div><div align="left" style="font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size:10pt">      Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-size: small;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">(Student student : students){</span></font></font></div><div align="left" style="font-size: small;"><font color="#328712"><font face="Courier New" size="2"><span style="font-size:10pt">            System.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.println(student.getSname());</span></font></font></div><div align="left" style="font-size: small;"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left" style="font-size: small;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-size: small;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></div><div align="left" style="font-size: small;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div></div></div></div></div></div></div><div align="left" style="color: rgb(227, 0, 0);"><font face="Courier New" size="2"><br></font></div></div><div align="left"><span style="color: rgb(227, 0, 0); font-family: 'Courier New';"><font size="2">Note：如果翻译成sql语句，条件中不是in而是等于，这个时候，select与subselect的效果是一样的。</font></span><div align="left"><div align="left"><div align="left" style="color: rgb(227, 0, 0); font-family: 'Courier New';"><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font size="2"><br></font></span></font></div><div align="left"><div style="color: rgb(227, 0, 0);"><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font>上面的程序如果在fetch为“join”的情况下执行，则执行结果为：</font></span></font></div><div align="left"><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_1_, classes0_.cname as cname1_1_, classes0_.description as descript3_1_1_, students1_.cid as cid1_3_, students1_.sid as sid3_, students1_.sid as sid0_0_, students1_.sname as sname0_0_, students1_.description as descript3_0_0_, students1_.cid as cid0_0_ from classes classes0_ left outer join student students1_ on classes0_.cid=students1_.cid where classes0_.cid=?</span></font></font></span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></span></font></div><div align="left" style="color: rgb(227, 0, 0);"><font><font face="'Courier New'" size="2"><br></font></font></div></div></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><b><font color="#1C3387"><font><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;">5、batch-size（</span></font><span style="font-size: medium;">set集合中的batch-size属性表示一次性查询出来的数量</span><span style="font-size: medium;">）（select + batch-size = subselect）</span></font></b></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); text-align: -webkit-left;">FetchTest.java(fetch为“select”的情况)</span></span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">@Test</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">savePerson() {</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      List&lt;Classes&gt; classeslist = session.createQuery(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;from Classes&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).list();</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">    </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">     </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(Classes classes : classeslist){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            Set&lt;Student&gt; students = classes.getStudents();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">(Student student : students){</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                  System.</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>out</i></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">.println(student.getSname());</span></font></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">     </span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      session.close();</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left" style="color: rgb(227, 0, 0); font-family: 楷体; font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font face="Courier New"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">执行结果：</span></span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select classes0_.cid as cid1_, classes0_.cname as cname1_, classes0_.description as descript3_1_ from classes classes0_</span></font></span></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid0_0_, students0_.sname as sname0_0_, students0_.description as descript3_0_0_, students0_.cid as cid0_0_ from student students0_ where students0_.cid in (?, ?)</span></font></div><div align="left" style="font-family: 楷体; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">Hibernate: select students0_.cid as cid1_1_, students0_.sid as sid1_, students0_.sid as sid0_0_, students0_.sname as sname0_0_, students0_.description as descript3_0_0_, students0_.cid as cid0_0_ from student students0_ where students0_.cid in (?, ?)</span></font></div></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></div><div style="text-align: -webkit-auto; font-family: 楷体;"><font color="#1C3387"><b>6、按需求决定使用fetch的类型</b></font></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">* 如果把需求分析翻译成sql语句，sql语句存在子查询，这个时候，首选子查询。这个时候，无论lazy设置为true或者false，在session.createQuery就已经发出了sql语句。如果设置为true，那么发出的sql语句将会查询一的一端，然后在访问到多的一端的时候再加载。如果设置为false，那么sql语句就会一次性查询出一的一方和多的一方。</span></span></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">* 如果没有子查询，但是想把数据一次性的提取出来，这个时候选择“join”。这时候懒加载不起作用。</span></span></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">* 如果没有子查询，但是不想把数据一次性的提取出来，这个时候选择默认“select”。这个时候，无论lazy设置为true或者false，在session.createQuery就已经发出了sql语句。如果设置为false，那么所有的select语句都会一次性发送，查询一的和多的一端。如果设置为true，那么开始的时候只会查询一的一方，只有真正访问到多的一端的时候，才会发出多条sql语句去查询。</span></span></div><div style="text-align: -webkit-auto; font-family: 楷体;"><font color="#E30000">注：set标签中的lazy主要决定什么时候取集合中的数据。fetch决定用什么样的方式查询集合。</font></div><div style="text-align: -webkit-auto; font-family: 楷体;"><font color="#41007D"><br></font></div><div style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></div></div></div></div></div></div></div>
</div>
<hr>
<a name="289"/>
<h1>08 深入了解Session（上）</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div style="text-align: -webkit-auto; font-family: 楷体;"><div><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><b>1、如果service层中调用两个dao层中的方法，并且每个dao层中都开启事务，即使service层中打开事务，但是并不能达到目的，因为并不能实现A Dao和B Dao的原子性。也就是同时提交和同时回滚。</b></span></font></span></div></div><div style="text-align: -webkit-auto; font-family: 楷体;"><font color="#41007D"><img src="Hibernate_files/Image [13].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></font></div><div style="text-align: -webkit-auto; font-family: 楷体;"><font color="#41007D"><br></font></div><div style="text-align: -webkit-auto;"><div style="font-family: 楷体;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>2、session的产生方式</b></font></span></div><div style="font-family: 楷体;"><font color="#41007D"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);">只要执行sessionFactory.openSession就会打开一个sessionImpl，利用sessionFactory.openSession就会创建一个sessionImpl，从而会创建一个事务。</span></span></font></div><div style="font-family: 楷体;"><font color="#41007D"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></div><div style="font-family: 楷体;"><font color="#41007D"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></div><div style="font-family: 楷体;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>3、session的缓存</b></font></span></div><div style="font-family: 楷体;"><font color="#41007D"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: 楷体; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0);"><br></span></span></font></div><div style="font-family: 楷体;"><span style="border-collapse: separate; font-family: 楷体; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#1C3387"><b>4、session与事务之间的关系</b></font></span></div><div style="font-family: 楷体;"><font color="#E30000">在hibernate.cfg.xml中设置<font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&lt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">property</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">name</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&quot;current_session_context_class&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&gt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">thread</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&lt;/</span></font> <font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">property</span></font><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&gt;</span></font>就可以实现session由当前线程产生。</font></div></div></div>
</div>
<hr>
<a name="2242"/>
<h1>09 深入了解Session（下）</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#1C3387"><b>1、session的产生方式</b></font><div><font color="#E30000">   * openSession的情况</font><br><div><img src="Hibernate_files/Image [14].png" type="image/png" height="185" style="cursor: default;cursor: default;cursor: default;" width="899"/></div><div><img src="Hibernate_files/Image [15].png" type="image/png" height="443" style="cursor: default;cursor: default;cursor: default;" width="845"/></div><div><font color="#E30000">   * 从上图中可以看出：</font></div><div><font color="#E30000">     * 只要执行sessionFactory.openSession就会重新打开一个sessionImpl。</font></div><div><font color="#E30000">     * 利用sessionFactory.openSession就会创建一个sessionImpl，从而会创建一个事务。</font></div><div>   </div><div><font color="#E30000">   * getCurrentSession的情况</font></div><div><font color="#E30000">     * 设置session是由当前线程产生</font></div><div><img src="Hibernate_files/Image [16].png" type="image/png" height="83" style="cursor: default;cursor: default;cursor: default;" width="730"/></div><div><br></div><div><img src="Hibernate_files/Image [17].png" type="image/png" height="462" style="cursor: default;cursor: default;" width="1016"/></div><div><img src="Hibernate_files/Image [18].png" type="image/png" height="190" style="cursor: default;cursor: default;" width="1099"/></div><div><img src="Hibernate_files/Image [19].png" type="image/png" height="289" style="cursor: default;cursor: default;" width="841"/></div><div><font color="#E30000">   * getCurrentSession的执行过程</font></div><div><font color="#E30000">     * 先从当前线程中查找session   </font></div><div><font color="#E30000">     * 如果找到，则直接使用，如果找不到执行第3步</font></div><div><font color="#E30000">     * 重新创建一个session，再把session放入到当前线程中</font></div><div><font color="#E30000">     * 所有的操作必须在事务环境下进行，包括get方法</font></div><div><img src="Hibernate_files/Image [20].png" type="image/png" height="168" style="cursor: default;cursor: default;" width="715"/></div><div><font color="#E30000">   * 利用当前线程产生session，这个时候不需要在程序中手动的调用session.close方法。</font></div><div><font color="#1C3387"><b><br></b></font></div><div><font color="#1C3387"><b>2、session的缓存：一级缓存，私有缓存</b></font></div><div><font color="#E30000">   * 缓存的生命周期</font></div><div><font color="#E30000">     * 生命周期开始：当session打开的时候</font></div><div><font color="#E30000">     * 生命周期结束：session.close</font></div><div><font color="#E30000">       * 如果session为当前线程，则程序执行完以后session自动关闭，这个时候缓存结束</font><b style="color: rgb(28, 51, 135);"><br></b></div><div><font color="#E30000">   * 缓存中数据的安全性</font></div><div><font color="#E30000">     * 如果是当前线程打开session，session本身在threadLocal中，所以session中的数据就是安全的</font></div><div><font color="#E30000">   * 数据怎么样放入到一级缓存中的</font></div><div><font color="#E30000">     session,get,load,save,update方法</font></div><div><img src="Hibernate_files/Image [21].png" type="image/png" height="227" style="cursor: default;cursor: default;" width="718"/></div><div><img src="Hibernate_files/Image [22].png" type="image/png" height="41" style="cursor: default;cursor: default;" width="882"/></div><div><font color="#E30000">     * 当执行session.get方法时，数据被放入到了一级缓存中，下次再取出的时候就直接从一级缓存中获取了，所以只发出了一条sql语句。</font></div><div><img src="Hibernate_files/Image [23].png" type="image/png" height="270" style="cursor: default;cursor: default;" width="730"/></div><div><img src="Hibernate_files/Image [24].png" type="image/png" height="43" style="cursor: default;cursor: default;" width="884"/></div><div><font color="#E30000">   * 当执行session.load方法时，数据也被放入到了一级缓存中，下次再取出的时候就直接从一级缓存中获取。</font></div><div><img src="Hibernate_files/Image [25].png" type="image/png" height="276" style="cursor: default;cursor: default;" width="775"/></div><div><img src="Hibernate_files/Image [26].png" type="image/png" height="254" style="cursor: default;cursor: default;" width="703"/></div><div><img src="Hibernate_files/Image [27].png" type="image/png" height="38" style="cursor: default;cursor: default;" width="885"/></div><div><font color="#E30000">     * evict方法相当于把一个对象从一级缓存中清除，下次再取的时候就取不到了，所以发送了两条语句。</font></div><div><img src="Hibernate_files/Image [28].png" type="image/png" height="157" style="cursor: default;cursor: default;" width="730"/></div><div><img src="Hibernate_files/Image [29].png" type="image/png" height="27" style="cursor: default;cursor: default;" width="884"/></div><div>     <font color="#E30000">* 由于update方法使对象变为了持久态，再次放入一级缓存，所以下次再取的时候就不会发送sql语句了。</font></div><div><img src="Hibernate_files/Image [30].png" type="image/png" height="379" style="cursor: default;cursor: default;" width="750"/></div><div><img src="Hibernate_files/Image [31].png" type="image/png" height="47" style="cursor: default;cursor: default;" width="881"/></div><div><br></div><div><font color="#E30000">   * 怎么样从一级缓存中取出数据</font></div><div><font color="#E30000">     * 利用session.get,load方法可以从缓存中取出数据</font></div><div><font color="#E30000">   * 怎么样把缓存中的数据同步到数据库中</font></div><div><font color="#E30000">     * </font><span style="color: rgb(227, 0, 0);">session.flush()，</span><span style="color: rgb(227, 0, 0);">hibernate将会检查session中所有的持久化对象（对象本身及关联的对象）</span></div><div><font color="#E30000">       * 持久化对象分成两类</font></div><div><font color="#E30000">         * 该持久化对象在数据库中没有相对应的记录，这个时候，hibernate会发出save语句。</font></div><div><font color="#E30000">         * 该持久化对象在数据库中有相应的记录，这个时候，hibernate会检查该对象的副本，如果和副本对比，有变化，则发出update语句，如果没有变化，则什么也不做。</font></div><div><font color="#E30000">         * 会检查关联对象的关系，看是通过哪个对象建立的关系，再查看映射文件，如果映射文件维护关系，则更新数据库中的相应的关系，如果不维护关系，则什么都不做。</font></div><div><font color="#E30000">         * 如果一个对象针对关系对象有级联操作，这个时候就会发出关于级联的sql语句，这个时候，级联对象执行update操作还是save操作，看对象是否与数据库对应有值。</font></div><div><img src="Hibernate_files/Image [32].png" type="image/png" style="cursor: default;"/></div><div><br></div><div><font color="#E30000">   * 怎么样把数据库中的数据同步到缓存中</font></div><div><font color="#E30000">     * session.refresh(object) 把一个数据从数据库同步到缓存中</font></div><div><img src="Hibernate_files/Image [33].png" type="image/png" height="280" style="cursor: default;cursor: default;" width="706"/></div><div><img src="Hibernate_files/Image [34].png" type="image/png" height="47" style="cursor: default;cursor: default;" width="889"/></div><div><img src="Hibernate_files/Image [35].png" type="image/png" style="cursor: default;cursor: default;"/></div><div>   <font color="#E30000">* 由于使用了refresh方法，所以重新发出了一条sql查询语句，并且将数据放入到缓存中。并且显示的数据是最新从数据库抓取的数据。</font></div><div><font color="#E30000">   * 怎么样把一个对象从缓存中移除</font></div><div><font color="#E30000">     session.evict(Object obj)</font></div><div><font color="#E30000">   * 怎么样清空缓存中所有的数据</font></div><div><font color="#E30000">     session.clear</font></div></div></div>
</div>
<hr>
<a name="1032"/>
<h1>10 二级缓存</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div style="font-size: 16px;"><font color="#1C3387" face="楷体"><b>1、二级缓存的基础知识</b></font></div><div style="font-size: 16px;"><font color="#FF0000" face="楷体">&lt;1&gt;当hibernate容器启动的时候，二期缓存就已经有了。</font></div><div style="font-size: 16px;"><font color="#FF0000" face="楷体">&lt;2&gt;二级缓存的生命周期是sessionFactory级别的，由于sessionFactory是线程安全的，所以二级缓存也是线程安全的。</font></div><div style="font-size: 16px;"><span style="color: rgb(255, 0, 0);">&lt;3&gt;二级缓存存在的目的就是为了提升查询速度。如果数据更新的特别频繁，那么就不适合存储在二级缓存中。因为命中率太低，反而会降低查询速度。重要的数据例如密码等也不能放在二级缓存中。</span></div><div style="font-size: 16px;"><span style="color: rgb(255, 0, 0);">&lt;4&gt;存放在二级缓存中一般都是不经常改变的数据。所以在hibernate3以上的版本，二级缓存并不建议清除（把一个对象清除或者所有的对象清除）。所以，sessionFactory中的evict方法都已经设置为过时的了，并且其中没有clear方法。</span></div><div style="font-size: 16px;"><span style="color: rgb(255, 0, 0);">&lt;5&gt;hibernate本身并没有实现二级缓存，是借助第三方框架来实现的。例如EHCache、OSCache等免费的第三方框架，JBoss Cache虽然是开源的，但是服务费用很高，所以一般公司用不起。</span></div><div style="font-size: 16px;"><font color="#FF0000" face="楷体"><br></font></div><div style="font-size: 16px;"><font color="#FF0000" face="楷体"><br></font></div><div style="font-size: 16px;"><font color="#1C3387" face="楷体"><b>2、使用二级缓存需要以下准备工作：</b></font></div><div style="font-size: 16px;"><font color="#FF0000" face="楷体">&lt;1&gt;设置提供二级缓存服务的第三方服务提供商。</font></div><div style="font-size: 16px;"><font color="#41007D" face="楷体">&lt;property name=&quot;cache.provider_class&quot;&gt;org.hibernate.cache.EhCacheProvider&lt;/property&gt;</font></div><div style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">&lt;2&gt;由于二级缓存默认是关闭的，所以需要手动打开。</span></span></div><div style="font-family: 楷体; font-size: 16px;"><font color="#41007D">&lt;property name=&quot;cache.use_second_level_cache&quot;&gt;true&lt;/property&gt;</font></div><div style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;"><br></div><div style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;"><br></div><div style="font-family: 楷体; font-size: 16px;"><font color="#1C3387"><b>3、设置哪个类的对象可以放入二级缓存</b></font></div><div style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">&lt;1&gt;hibernate.cfg.xml中的设置方式</div><div style="font-family: 楷体; font-size: 16px;"><font color="#41007D">&lt;class-cache usage=&quot;nonstrict-read-write|read-only|read-write|transactional&quot; class=&quot;cn.itheima02.hibernate.domain.Classes&quot;/&gt;</font></div><div style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">&lt;2&gt;*.hbm.xml中的设置方式</div><div style="font-family: 楷体; font-size: 16px;"><font color="#41007D">&lt;class name=&quot;cn.itheima02.hibernate.domain.Classes&quot;&gt;</font></div><div style="font-family: 楷体; font-size: 16px;"><font color="#41007D">     &lt;cache usage=&quot;read-only&quot;/&gt;</font></div><div style="font-family: 楷体; font-size: 16px;"><font color="#41007D">&lt;/class&gt;</font></div><div style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;"><br></div><div style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;"><br></div><div style="font-family: 楷体; font-size: 16px;"><font color="#1C3387"><b>4、判断数据是从二级缓存里面取的而不是从一级缓存里面取的代码</b></font></div><div align="left" style="font-family: 楷体; text-align: left; font-size: 15px;"><font color="#6A0081"><font face="Courier New">Session session =</font> <font face="Courier New"><i>sessionFactory</i></font><font face="Courier New">.openSession();</font></font></div><div align="left" style="font-family: 楷体; text-align: left; font-size: 15px;"><font color="#6A0081"><font face="Courier New">Classes classes = (Classes)session.get(Classes.</font> <font face="Courier New"><b>class</b></font><font face="Courier New">, 1L);</font></font></div><div align="left" style="font-family: 楷体; text-align: left; font-size: 15px;"><font color="#6A0081" face="Courier New">//如果usage里面设置的是read-only，那么只会清空一级缓存</font></div><div align="left" style="font-family: 楷体; text-align: left; font-size: 15px;"><font color="#6A0081" face="Courier New">//如果usage里面设置的是read-write，就会清空二级缓存</font></div><div align="left" style="font-family: 楷体; text-align: left; font-size: 15px;"><font color="#6A0081" face="Courier New">session.evict(classes);</font></div><div align="left" style="font-family: 楷体; text-align: left; font-size: 15px;"><font color="#6A0081"><font face="Courier New">classes = (Classes)session.get(Classes.</font> <font face="Courier New"><b>class</b></font><font face="Courier New">, 1L);</font></font></div><div align="left" style="text-align: left;"><div style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 10pt;"><font><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">执行结果：</span></span></font></div><div style="font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px;"><font color="#6A0081">     如果usage里面设置的是read-only，那么只有一条select语句。</font></span></span></div><div style="font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px;"><font color="#6A0081">     如果usage里面设置的是read-write，那么就会有两条select语句。</font></span></span></div></div><div align="left" style="color: rgb(255, 0, 0); text-align: left; font-size: 16px;">注：session.get和session.load把数据拿出来以后，存放到了一级缓存和二级缓存。</div><div align="left" style="color: rgb(255, 0, 0); text-align: left; font-size: 16px;"><font face="楷体"><br></font></div><div align="left" style="color: rgb(255, 0, 0); text-align: left; font-size: 16px;"><font face="楷体"><br></font></div><div align="left" style="text-align: left; font-size: 16px;"><font color="#1C3387" face="楷体"><b>5、二级缓存分为类的二级缓存和集合的二级缓存，用法是一致的。</b></font></div><div align="left" style="color: rgb(255, 0, 0); text-align: left; font-size: 16px;"><font face="楷体">范例代码：</font></div><div align="left" style="text-align: left; font-size: 15px;"><font color="#6A0081" face="楷体">     &lt;set name=&quot;students&quot; cascade=&quot;all&quot; inverse=&quot;false&quot;&gt;</font></div><div align="left" style="text-align: left; font-size: 15px;"><font color="#6A0081" face="楷体">          &lt;cache usage=&quot;read-only&quot;/&gt;</font></div><div align="left" style="text-align: left; font-size: 15px;"><font color="#6A0081" face="楷体">     &lt;/set&gt;</font></div><div style="font-size: 16px;"><font color="#FF0000" face="楷体"><br></font></div><div style="font-size: 16px;"><font color="#FF0000" face="楷体"><br></font></div><div><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px; text-align: left;"><font color="#1C3387"><b>6、save(用native生成主键的方式除外)、update也可以存入二级缓存。</b></font></span></span></div><div style="font-size: 15px;"><font color="#41007D"><font face="Courier New">Session session =</font> <font face="Courier New"><i>sessionFactory</i></font><font face="Courier New">.openSession();</font></font></div><div align="left" style="font-size: 15px;"><font color="#41007D" face="Courier New">Transaction transaction = session.beginTransaction();</font></div><div align="left" style="font-size: 15px;"><font color="#41007D"><font face="Courier New">Classes <span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">classes</span> =</font> <font face="Courier New"><b>new</b></font> <font face="Courier New">Classes();</font></font></div><div align="left" style="font-size: 15px;"><font color="#41007D"><font face="Courier New"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">classes</span>.setCname(</font><font face="Courier New">&quot;aaaa&quot;</font><font face="Courier New">);</font></font></div><div align="left" style="font-size: 15px;"><font color="#41007D" face="Courier New">session.save( <span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">classes</span>);</font></div><div align="left" style="font-size: 15px;"><font color="#41007D" face="Courier New">transaction.commit();</font></div><div align="left" style="font-size: 15px;"><font color="#41007D" face="Courier New">session.close();</font></div><div align="left" style="font-size: 15px;"><font color="#41007D" face="Courier New">session = sessionFactory.openSession();</font></div><div align="left" style="font-size: 15px;"><font color="#41007D" face="Courier New">transaction = session.beginTransaction();</font></div><div align="left" style="font-size: 13px;"><font color="#41007D"> <font face="Courier New">//重新开启一个session之后，一级缓存就已经清除了，因为并没有发出sql语句，所以这时候取的是二级缓存</font></font></div><div align="left" style="font-size: 15px;"><font color="#41007D"><font face="Courier New">Classes classes2 = (Classes)session.get(Classes.</font> <font face="Courier New"><b>class</b></font><font face="Courier New">, <span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">classes</span>.getCid());</font></font></div><div align="left" style="font-size: 15px;"><font color="#41007D"><font face="Courier New">System.</font> <font face="Courier New"><i>out</i></font><font face="Courier New">.println(classes2.getCname());</font></font></div><div align="left" style="font-size: 15px;"><font color="#41007D" face="Courier New">transaction.commit();</font></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px; text-align: left;"><br></span></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px; text-align: left;"><br></span></span></div><div><div style="font-size: 16px; font-family: 楷体;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px; text-align: left;"><font color="#1C3387"><b>12、如果需要存储的数据太多，可能二级缓存会出现溢出的情况，ehcache提供了存储多余的数据至磁盘的策略。通过ehcache.xml配置文件可以实现。</b></font></span></span></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="楷体">//如果溢出，存放在哪里</font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#6A0081" face="楷体">&lt;diskStore path =&quot;C:\\TEMP1&quot; /&gt;</font></span></div><div align="left"><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">&lt; Cache</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       //设置存储的类</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       name =&quot;cn.itheima02.hibernate.domain.Classes&quot;</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       //设置存储的对象的个数</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       maxElementsInMemory =&quot;5&quot;</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       eternal =&quot;false&quot;</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       timeToIdleSeconds =&quot;120&quot;</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       timeToLiveSeconds =&quot;120&quot;</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       //超过maxElementsInMemory值之后 ， 放置到磁盘上</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       overflowToDisk =&quot;true&quot;</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       //可以放置到磁盘上的对象的个数</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       maxElementsOnDisk =&quot;10000000&quot;</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       diskPersistent =&quot;false&quot;</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       diskExpiryThreadIntervalSeconds =&quot;120&quot;</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">       memoryStoreEvictionPolicy =&quot;LRU&quot;</font></font></span></div><div align="left" style="font-size: 15px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font><font color="#6A0081" face="楷体">/&gt;</font></font></span></div></div><div><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;"><br></span></span></div><font color="#E30000">执行完下面的语句之后，就可以看到相关路径出现了缓存的数据了。</font></div><div align="left" style="font-family: 楷体; font-size: 16px; color: rgb(65, 0, 125);"><font face="Courier New" size="2"><span style="font-size: 10pt;">Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></div><div align="left" style="font-family: 楷体; font-size: 16px; color: rgb(65, 0, 125);"><font face="Courier New" size="2"><span style="font-size:10pt">Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体; font-size: 16px; color: rgb(65, 0, 125);"><font face="Courier New" size="2"><span style="font-size:10pt">session.createQuery(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;from Classes&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).list();</span></font></div><div align="left" style="font-family: 楷体; font-size: 16px; color: rgb(65, 0, 125);"><font face="Courier New" size="2"><span style="font-size:10pt">transaction.commit();</span></font></div><div align="left" style="font-family: 楷体; font-size: 16px; color: rgb(65, 0, 125);"><font face="Courier New" size="2"><span style="font-size:10pt">//如果不设置1s钟休眠的话，就会没有时间写入到相关路径中</span></font></div><div align="left" style="font-family: 楷体; font-size: 16px; color: rgb(65, 0, 125);"><font face="Courier New" size="2"><span style="font-size: 10pt;">Thread.</span> <span style="font-size: 10pt;"><i>sleep</i></span><span style="font-size: 10pt;">(1000);</span></font></div><div align="left" style="font-family: 楷体; font-size: 16px; color: rgb(65, 0, 125);"><font face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left" style="font-family: 楷体; font-size: 16px; color: rgb(65, 0, 125);"><font face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div style="font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px;"><font color="#1C3387"><b>13、查询缓存</b></font></span></span></div><div style="font-family: 楷体; font-size: 10pt; color: rgb(65, 0, 125);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">&lt;1&gt;查询缓存是建立在二级缓存之上的。</span></span></div><div style="font-family: 楷体; font-size: 10pt; color: rgb(65, 0, 125);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">&lt;2&gt;由于查询缓存默认并不是开启的，所以需要自己手动设置打开。</span></span></div><div style="font-family: 楷体; font-size: 10pt; color: rgb(65, 0, 125);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">&lt;3&gt;在hibernate.cfg.xml文件中，进行如下设置打开查询缓存：</span></span></div><div style="font-family: 楷体; font-size: 10pt;"><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px;"><font color="#41007D">&lt;property name=&quot;cache.use_query_cache&quot;&gt;true&lt;/property&gt;</font></span></span></div><div style="text-align: -webkit-auto; font-family: 楷体;"><div><font color="#41007D" size="4"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">&lt;4&gt;针对查询使用的是查询缓存</span></span></font></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">执行结果：</span></span></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">     以下代码执行结果是只发出了一条sql语句</span></span></div><div align="left"><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">//以下两个query都必须调用setCacheable方法</span></font></span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//第一个query设置的目的在于可以存放至二级缓存中</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//第二个query设置的目的在于可以从二级缓存中取出数据</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">Session session =</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.openSession();</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Transaction transaction = session.beginTransaction();</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">Query query = session.createQuery(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;from Classes&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">query.setCacheable(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>true</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">query.list();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//如果直接调用list方法就会去数据库里面取数据</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//session.createQuery(&quot;from Classes&quot;).list();</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">query = session.createQuery(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;from Classes&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">query.setCacheable(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>true</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">);</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">query.list();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">transaction.commit();</span></font></div><div align="left" style="color: rgb(255, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="color: rgb(255, 0, 0);"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div></div><div style="font-size: 10pt;"><div style="font-family: 楷体;"><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px;"><font color="#1C3387"><b>14、list与Iterator的区别</b></font></span></span></span></div><div style="font-family: 楷体; color: rgb(65, 0, 125);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">list会直接查询缓存，针对数据而言，而不是针对ID，从而查出所有的数据。</span></span></div><div style="font-family: 楷体; color: rgb(65, 0, 125);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">二级缓存是针对ID的查询缓存。</span></span></div><div style="font-family: 楷体; color: rgb(65, 0, 125);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">iterator会先把该表的cid查询出来，再根据cid查询表中所有的数据，此时会发出n+1条。</span></span></div><div align="left" style="text-align: -webkit-auto;"><font face="Courier New" size="2" style="font-size: 10pt; color: rgb(106, 0, 129);"><span style="font-size: 10pt;">Session session =</span></font> <font face="Courier New" size="2" style="font-size: 10pt; color: rgb(106, 0, 129);"><span style="font-size:10pt"><i>sessionFactory</i></span></font><font face="Courier New" size="2" style="font-size: 10pt; color: rgb(106, 0, 129);"><span style="font-size:10pt">.openSession();</span></font></div><div align="left"><div align="left" style="font-family: 楷体;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Transaction transaction = session.beginTransaction();</span></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//由于二级缓存是针对ID进行的缓存，所以，后面的查询语句只会查询出来1、2、3、4之外的数据</span></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">Iterator&lt;Classes&gt; iterator = session.createQuery(</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;from Classes where cid in(1,2,3,4)&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).iterate();</span></font></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">while</span></font><font face="Courier New" size="2"><span style="font-size:10pt">(iterator.hasNext()){</span></font></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = iterator.next();</span></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      classes.getCname();</span></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">iterator = session.createQuery(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;from Classes&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">).iterate();</span></font></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">while</span></font><font face="Courier New" size="2"><span style="font-size:10pt">(iterator.hasNext()){</span></font></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      Classes classes = iterator.next();</span></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      classes.getCname();</span></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left" style="font-family: 楷体;"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">transaction.commit();</span></font></div><div style="font-family: 楷体; color: rgb(28, 51, 135);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;"><br></span></span></div><div style="font-family: 楷体;"><div style="color: rgb(28, 51, 135);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;"><br></span></span></span></div><div><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; border-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px;"><font color="#1C3387"><b>15、session.createQuery().list()与session.createQuery().iterator()方法的区别</b></font></span></span></span></div><div style="color: rgb(28, 51, 135);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">list</span></span></div><div style="color: rgb(28, 51, 135);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">     利用查询缓存，不利用一级缓存和二级缓存</span></span></div><div style="color: rgb(28, 51, 135);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">     查询缓存里面相当于是一个Map，它的key就是hql语句，如果本次使用createQuery查询的语句与查询缓存中所有的hql都不对应，那么就会去查询数据库，否则，不用查询。</span></span></div><div style="color: rgb(28, 51, 135);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">iterator</span></span></div><div style="color: rgb(28, 51, 135);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">     利用一级缓存，二级缓存，不利用查询缓存，发出n+1条查询。</span></span></div><div style="color: rgb(28, 51, 135);"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(255, 0, 0); font-family: 楷体; font-size: 16px;">     iterator首先会去数据库查询出所有的id，然后去一级缓存和二级缓存去查找。一级缓存和二级缓存也相当于有很多个map，这些map的key不是hql语句，而是id，所以如果一级缓存和二级缓存中包括了所有的带查询的id，那么就不会查询数据库。如果没有或者只包含一部分id，那么就会查询所有的或者剩余的id对应的数据。</span></span></div></div></div></div></div></div>
</div>
<hr>
<a name="764"/>
<h1>11 HQL</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#1C3387" face="楷体" style="font-size: 16px;"><b>1、语法规则</b></font><div style="font-size: 16px;"><font color="#E30000" face="楷体">from 持久化类 where 属性</font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">sql语句中的函数count，avg，sum等在HQL语句都有对应的方式。</font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">order by，group by，having，子查询，in等在HQL语句中也有对应的方式。</font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体"><br></font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体"><br></font></div><div style="font-size: 16px;"><font color="#1C3387" face="楷体"><b>2、单表的查询</b></font></div><div align="left"><font face="楷体"><font face="Courier New"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212);"><font color="#E30000" style="font-size: 16px;">&lt;1&gt;</font><font color="#41007D" style="font-size: 10pt;">List</font></span><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font color="#41007D">&lt;Classes&gt; classList = session.createQuery(</font></span></font><font color="#41007D" style="font-size: 16px;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&quot;select c.cname,c.cdes from Classes c&quot;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);">).list();</span></font></font></font></div><div align="left" style="font-size: 16px; color: rgb(227, 0, 0);"><font face="楷体"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe"><img src="Hibernate_files/Image [36].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></font></font></div><div align="left" style="color: rgb(227, 0, 0);"><div><span style="font-size: 16px; background-color: rgb(232, 242, 254);">注：这种方式得到的对象如果强转成Classes的对象，会报错，因为Classes类有4个属性，而这里查询出来的只有2个。如果想要查询一部分属性，并且保持4个属性，那么可以使用构造函数的方式进行查询。</span></div><div><span style="font-size: 16px; background-color: rgb(232, 242, 254);"><br></span></div></div><div align="left"><div style="font-family: 'Courier New';"><font face="Courier New" style="background-color: rgb(232, 242, 254);"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212);"><font color="#E30000" style="font-size: 16px;">&lt;2&gt;</font><font color="#41007D" style="font-size: 10pt;">List</font></span><span style="font-size: 10pt;"><font color="#41007D">&lt;Classes&gt; classList = session.createQuery(</font></span></font><font color="#41007D" style="font-family: 楷体; background-color: rgb(232, 242, 254); font-size: 16px;"> <font face="Courier New" size="2"><span style="font-size: 10pt;">&quot;select c.cdes,c.cname from Classes c&quot;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">).list();</span></font></font></div><div style="font-size: 16px;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="text-align: -webkit-left;"><font color="#E30000"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);">List中数组的数据的顺序和select后面字段的顺序是一致的。</span></font></span></span></div><div style="font-family: 'Courier New'; font-size: 10pt;"><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px; text-align: -webkit-left;"><font color="#41007D"><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><img src="Hibernate_files/Image [37].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></font></font></span></span></div><div style="font-family: 'Courier New'; font-size: 10pt;"><span style="border-collapse: separate; font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px; text-align: -webkit-left;"><font color="#41007D"><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><br></span></font></font></span></span></div><div style="font-family: 'Courier New';"><div><font color="#41007D"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="font-family: 楷体; text-align: -webkit-left;"><font face="Courier New"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212);"><font color="#E30000" style="font-size: 16px;">&lt;3&gt;</font><font color="#41007D" style="font-size: 10pt;">List</font></span><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font color="#41007D">&lt;Classes&gt; classList = session.createQuery(</font></span></font><font color="#41007D" style="font-size: 16px;"> <font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);">&quot;from Classes c&quot;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);">).list();</span></font></font></span></span></font></div><div style="font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px; text-align: -webkit-left;"><font color="#41007D"><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><img src="Hibernate_files/Image [38].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></font></font></span></span></div><div style="font-size: 10pt;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: 楷体; font-size: 16px; text-align: -webkit-left;"><font color="#41007D"><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><br></span></font></font></span></span></div></div></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">&lt;4&gt;</font><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">List&lt;Classes&gt; classList = session.createQuery(</span></font></span> <span style="font-size: medium;"><font color="#2A00FF" face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&quot;select new cn.itheima02.hibernate.domain.Classes(c.cname,c.cdes) from Classes c&quot;</span></font></span><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">).list();</span></font></span></div><div style="font-size: 16px;"><font color="#E30000" face="楷体"><img src="Hibernate_files/Image [39].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体"><img src="Hibernate_files/Image [40].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体"><br></font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">&lt;5&gt;</font><font color="#6A0081"><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">List&lt;Classes&gt; classList = session.createQuery(</span></font></span> <span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&quot;select count(*) from Classes c&quot;</span></font></span><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">).list();</span></font></span></font></div><div style="font-size: 16px;"><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe"><img src="Hibernate_files/Image [41].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></font></span></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">总结：</font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">&lt;1&gt;如果页面上的字段和数据库中的字段的个数差不多，直接使用&quot;from 持久化类&quot;查出所有的数据。</font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">&lt;2&gt;如果相差很多，那么就可以考虑利用构造函数进行查询，只查询出一部分数据。</font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体"><br></font></div><div style="font-size: 16px;"><font color="#E30000"><br></font></div><div style="font-size: 16px;"><font color="#1C3387" face="楷体"><b>3、一对多和多对多的集合</b></font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">一对多</font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">&lt;1&gt;</font><font color="#41007D"><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">List&lt;Classes&gt; classList = session.createQuery(</span></font></span> <span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&quot;from Classes c inner join c.persons p&quot;</span></font></span><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">).list();</span></font></span></font></div><div style="font-size: 16px;"><font color="#41007D"><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe"><img src="Hibernate_files/Image [42].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></font></span></font></div><div style="font-size: 16px;"><font color="#41007D"><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe"><br></span></font></span></font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">&lt;2&gt;</font><span style="color: rgb(65, 0, 125);"><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">List&lt;Classes&gt; classList = session.createQuery(<span> </span></span></font></span><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&quot;from Person p inner join p.classes c&quot;</span></font></span><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">).list();</span></font></span></span></div><div style="font-size: 16px;"><span style="color: rgb(65, 0, 125);"><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><img src="Hibernate_files/Image [43].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></font></span></span></div><div style="font-size: 16px;"><span style="color: rgb(65, 0, 125);"><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size: 10pt; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><br></span></font></span></span></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">&lt;3&gt;迫切内连接</font></div><div style="font-size: 16px;"><font color="#6A0081"><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">List&lt;Classes&gt; classList = session.createQuery(</span></font></span> <span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">&quot;from Person p inner join fetch p.classes c&quot;</span></font></span><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe">).list();</span></font></span></font></div><div style="font-size: 16px;"><font color="#6A0081"><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe"><img src="Hibernate_files/Image [44].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></font></span></font></div><div style="font-size: 16px;"><font color="#6A0081"><span style="font-size: medium;"><font face="Courier New" size="2"><span style="font-size:10pt; background:#e8f2fe"><br></span></font></span></font></div><div style="font-size: 16px;"><font color="#E30000" face="楷体">&lt;4&gt;用等值连接进行查询，不能加fetch，意味着改变不了数据结构</font></div><div style="font-size: 16px;"><span style="font-size: medium;"><img src="Hibernate_files/Image [45].png" type="image/png" style="cursor: default;"/></span></div><div style="font-size: 16px;"><span style="font-size: medium;"><br></span></div><div><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;">&lt;5&gt;无论是内连接还是左外连接，如果查询出来的结构和持久化类的结构保持一致，就要使用迫切连接，在join后面加fetch</span></div><div><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;"><img src="Hibernate_files/Image [46].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></div><div><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;">&lt;6&gt;</span></div><div><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;"><img src="Hibernate_files/Image [47].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></div><div><font color="#E30000" face="楷体" size="4">&lt;7&gt;</font></div><div><font color="#E30000" face="楷体" size="4"><img src="Hibernate_files/Image [48].png" type="image/png" height="215" style="cursor: default;cursor: default;cursor: default;" width="1005"/></font></div><div><font color="#E30000" face="楷体" size="4"><br></font></div><div style="font-size: 16px;"><div><span style="color: rgb(227, 0, 0); font-family: 楷体;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;">多对多</span></span></span></div><div>&lt;1&gt;</div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;"><img src="Hibernate_files/Image [49].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;"><br></span></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;">&lt;2&gt;迫切左外连接</span></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;"><img src="Hibernate_files/Image [50].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;"><img src="Hibernate_files/Image [51].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;"><br></span></span></div></div><div style="font-size: 16px;"><span style="color: rgb(227, 0, 0); font-family: 楷体;">一对多和多对多的集合</span></div><div style="font-size: 16px;"><span style="color: rgb(227, 0, 0); font-family: 楷体;">&lt;1&gt;</span><span style="font-size: medium;"><img src="Hibernate_files/Image [52].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></div><div style="font-size: 16px;"><span style="font-size: medium;"><img src="Hibernate_files/Image [53].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></div><div style="font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;">&lt;2&gt;遍历上面这种结构的代码如下：</span></span></div><div style="font-size: medium;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;"><img src="Hibernate_files/Image [54].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></span></div><div><font color="#E30000" face="楷体" size="4">&lt;3&gt;</font></div><div><img src="Hibernate_files/Image [55].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></div><div><br></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: large;">&lt;4&gt;当一对多和多对多作为集合使用的时候，就可能会出现笛卡尔积的情况，这时候可以用set解决问题。<img src="Hibernate_files/Image [56].png" type="image/png" style="cursor: default;"/></span></span></div><div><font color="#E30000" face="楷体" size="4">&lt;5&gt;如果是多张表的查询，则找核心表，这样查询效率比较高。</font></div></div>
</div>
<hr>
<a name="1457"/>
<h1>12 Criteria</h1>

<div>
<div style="font-size: 16px; word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#E30000" face="楷体">&lt;1&gt;</font><div><font color="#E30000" face="楷体"><img src="Hibernate_files/Image [57].png" type="image/png" height="28" style="cursor: default;cursor: default;cursor: default;" width="688"/></font></div><div><font color="#E30000" face="楷体"><img src="Hibernate_files/Image [58].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></font></div><div><font color="#E30000" face="楷体"><br></font></div><div><font color="#E30000" face="楷体">&lt;2&gt;</font><img src="Hibernate_files/Image [59].png" type="image/png" height="27" style="cursor: default;cursor: default;cursor: default;" width="869"/></div><div><br></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;">&lt;3&gt;Query设置分页的情况</span></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;"><img src="Hibernate_files/Image [60].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></span></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="color: rgb(227, 0, 0); font-family: 楷体; font-size: 16px;"><br></span></span></div></div>
</div></body></html> 